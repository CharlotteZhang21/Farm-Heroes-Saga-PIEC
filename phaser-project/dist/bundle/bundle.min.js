!function(){function e(t,i,a){function s(n,o){if(!i[n]){if(!t[n]){var h="function"==typeof require&&require;if(!o&&h)return h(n,!0);if(r)return r(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return s(i||e)},c,c.exports,e,t,i,a)}return i[n].exports}for(var r="function"==typeof require&&require,n=0;n<a.length;n++)s(a[n]);return s}return e}()({1:[function(e,t,i){"use strict";i.tooltip1="Swap the Cropsies\n to match",i.tooltip2="Collect these apples\n to win"},{}],2:[function(e,t,i){"use strict";i.publish={}},{}],3:[function(e,t,i){"use strict";i.autoPlayAfter=6e3,i.interactionType="swipe",i.fallUpwards=!1,i.fallStyle="bounce",i.tileBounce=.3,i.gravity=1,i.piecePadding="25%",i.belowPiecePadding="-10%",i.fadeBoardOnComplete=!1,i.removeGoalPanelOnComplete=!0,i.timer=!1,i.timerDuration=0,i.interactionDelay=0,i.handAnchorX=0,i.handAnchorY=0,i.lang="en",i.interaction1={highlightTiles:[{x:4,y:3},{x:4,y:2}],highlightOtherTiles:[{x:2,y:2},{x:4,y:2}],arrow:{dir:"right"},tooltip:"{{tooltip1}}"},i.interaction2={highlightTiles:[{x:3,y:2},{x:3,y:3}],highlightOtherTiles:[{x:2,y:3},{x:5,y:3}],arrow:{dir:"right"},tooltip:"{{tooltip2}}"},i.tooltipTextFill="#884444",i.tooltipTextStroke="#000000",i.tooltipTextStrokeThickness=0,i.goal2={item:"piece01",amount:4,collected:0},i.goal3={item:"piece04",amount:3,collected:0},i.goalTextFill="#ba8b50",i.goalTextStroke="#ffffff",i.goalTextStrokeThickness=6,i.goalPanelExitPortrait="up",i.goalPanelExitLandscape="up",i.goalPanelAnglePortrait=0,i.goalPanelAngleLandscape=0,i.booster01={delay:600,animation:"booster01-destroy",piecesToCreate:"4-horizontal"},i.goalExitDelay=0,i.goalExitDuration=600,i.ctaMoveDelay=0,i.ctaMoveDuration=800,i.ctaAnimation="bulge",i.ctaAnimationDelay=0,i.ctaAnimationDuration=1e3,i.logoAnimation="spinIn",i.logoAnimationDelay=0,i.logoAnimationDuration=1e3;var a={};a.hunter={fps:10,loop:!0,delay:0,htmlId:"hunter",showOn:"win",animations:[{y:"-100%",easing:"QuadraticOut",delay:0,duration:1e3,animation:"moveTo"}]},a.amelia={fps:10,loop:!0,delay:0,htmlId:"amelia",showOn:"win",animations:[{y:"-100%",easing:"QuadraticOut",delay:0,duration:1e3,animation:"moveTo"}]},a.cascade={fps:30,loop:!0,delay:0,htmlId:["cascade-1","cascade-2","cascade-3","cascade-4"],showOn:"win",animations:[{easing:"QuadraticOut",delay:0,duration:500,animation:"fadeIn"}]},a.logo={fps:60,loop:!0,delay:0,htmlId:"logo",showOn:"win",animations:[{easing:"QuadraticOut",delay:0,duration:1e3,animation:"spinIn"}]},i.customEffects=a;var s={};s["piece-destroy"]={fps:30,scale:1},s["booster01-destroy"]={fps:50,scale:1.5},i.animations=s,i.settingsOveride=""},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"Amelia_00000.png":{frame:{x:116,y:1,w:109,h:159},rotated:!1,trimmed:!0,spriteSourceSize:{x:49,y:31,w:109,h:159},sourceSize:{w:200,h:220}},"Amelia_00001.png":{frame:{x:227,y:1,w:109,h:159},rotated:!1,trimmed:!0,spriteSourceSize:{x:49,y:31,w:109,h:159},sourceSize:{w:200,h:220}},"Amelia_00002.png":{frame:{x:568,y:1,w:109,h:158},rotated:!1,trimmed:!0,spriteSourceSize:{x:47,y:32,w:109,h:158},sourceSize:{w:200,h:220}},"Amelia_00003.png":{frame:{x:455,y:1,w:111,h:158},rotated:!1,trimmed:!0,spriteSourceSize:{x:45,y:32,w:111,h:158},sourceSize:{w:200,h:220}},"Amelia_00004.png":{frame:{x:1,y:1,w:113,h:159},rotated:!1,trimmed:!0,spriteSourceSize:{x:43,y:31,w:113,h:159},sourceSize:{w:200,h:220}},"Amelia_00005.png":{frame:{x:338,y:1,w:115,h:158},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:32,w:115,h:158},sourceSize:{w:200,h:220}},"Amelia_00006.png":{frame:{x:790,y:1,w:115,h:157},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:33,w:115,h:157},sourceSize:{w:200,h:220}},"Amelia_00007.png":{frame:{x:1019,y:1,w:115,h:155},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:35,w:115,h:155},sourceSize:{w:200,h:220}},"Amelia_00008.png":{frame:{x:1247,y:1,w:113,h:153},rotated:!1,trimmed:!0,spriteSourceSize:{x:43,y:37,w:113,h:153},sourceSize:{w:200,h:220}},"Amelia_00009.png":{frame:{x:1362,y:1,w:111,h:153},rotated:!1,trimmed:!0,spriteSourceSize:{x:45,y:37,w:111,h:153},sourceSize:{w:200,h:220}},"Amelia_00010.png":{frame:{x:1136,y:1,w:109,h:155},rotated:!1,trimmed:!0,spriteSourceSize:{x:47,y:35,w:109,h:155},sourceSize:{w:200,h:220}},"Amelia_00011.png":{frame:{x:907,y:1,w:110,h:157},rotated:!1,trimmed:!0,spriteSourceSize:{x:48,y:33,w:110,h:157},sourceSize:{w:200,h:220}},"Amelia_00012.png":{frame:{x:679,y:1,w:109,h:158},rotated:!1,trimmed:!0,spriteSourceSize:{x:49,y:32,w:109,h:158},sourceSize:{w:200,h:220}},"Amelia_00013.png":{frame:{x:116,y:1,w:109,h:159},rotated:!1,trimmed:!0,spriteSourceSize:{x:49,y:31,w:109,h:159},sourceSize:{w:200,h:220}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"amelia.png",format:"RGBA8888",size:{w:1474,h:161},scale:"1"}}},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"leaves0000.png":{frame:{x:1399,y:247,w:56,h:138},rotated:!1,trimmed:!0,spriteSourceSize:{x:100,y:65,w:56,h:138},sourceSize:{w:256,h:256}},"leaves0001.png":{frame:{x:887,y:488,w:45,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:106,y:72,w:45,h:124},sourceSize:{w:256,h:256}},"leaves0002.png":{frame:{x:366,y:492,w:73,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:92,y:78,w:73,h:112},sourceSize:{w:256,h:256}},"leaves0003.png":{frame:{x:547,y:693,w:106,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:75,y:81,w:106,h:106},sourceSize:{w:256,h:256}},"leaves0004.png":{frame:{x:1573,y:491,w:135,h:135},rotated:!1,trimmed:!0,spriteSourceSize:{x:61,y:67,w:135,h:135},sourceSize:{w:256,h:256}},"leaves0005.png":{frame:{x:1251,y:907,w:161,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:48,y:54,w:161,h:161},sourceSize:{w:256,h:256}},"leaves0006.png":{frame:{x:1,y:683,w:183,h:184},rotated:!1,trimmed:!0,spriteSourceSize:{x:37,y:42,w:183,h:184},sourceSize:{w:256,h:256}},"leaves0007.png":{frame:{x:905,y:684,w:202,h:203},rotated:!1,trimmed:!0,spriteSourceSize:{x:28,y:33,w:202,h:203},sourceSize:{w:256,h:256}},"leaves0008.png":{frame:{x:1728,y:464,w:217,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:20,y:26,w:217,h:217},sourceSize:{w:256,h:256}},"leaves0009.png":{frame:{x:1728,y:1,w:229,h:230},rotated:!1,trimmed:!0,spriteSourceSize:{x:14,y:20,w:229,h:230},sourceSize:{w:256,h:256}},"leaves0010.png":{frame:{x:491,y:247,w:238,h:239},rotated:!1,trimmed:!0,spriteSourceSize:{x:10,y:15,w:238,h:239},sourceSize:{w:256,h:256}},"leaves0011.png":{frame:{x:1482,y:1,w:244,h:243},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:13,w:244,h:243},sourceSize:{w:256,h:256}},"leaves0012.png":{frame:{x:1,y:1,w:245,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:12,w:245,h:244},sourceSize:{w:256,h:256}},"leaves0013.png":{frame:{x:248,y:1,w:245,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:12,w:245,h:244},sourceSize:{w:256,h:256}},"leaves0014.png":{frame:{x:495,y:1,w:245,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:12,w:245,h:244},sourceSize:{w:256,h:256}},"leaves0015.png":{frame:{x:1236,y:1,w:244,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:12,w:244,h:244},sourceSize:{w:256,h:256}},"leaves0016.png":{frame:{x:742,y:1,w:245,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:12,w:245,h:244},sourceSize:{w:256,h:256}},"leaves0017.png":{frame:{x:1,y:247,w:243,h:243},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:13,w:243,h:243},sourceSize:{w:256,h:256}},"leaves0018.png":{frame:{x:1482,y:246,w:244,h:243},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:13,w:244,h:243},sourceSize:{w:256,h:256}},"leaves0019.png":{frame:{x:989,y:1,w:245,h:244},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:12,w:245,h:244},sourceSize:{w:256,h:256}},"leaves0020.png":{frame:{x:246,y:247,w:243,h:243},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:13,w:243,h:243},sourceSize:{w:256,h:256}},"leaves0021.png":{frame:{x:731,y:247,w:238,h:239},rotated:!1,trimmed:!0,spriteSourceSize:{x:10,y:15,w:238,h:239},sourceSize:{w:256,h:256}},"leaves0022.png":{frame:{x:1728,y:233,w:229,h:229},rotated:!1,trimmed:!0,spriteSourceSize:{x:14,y:20,w:229,h:229},sourceSize:{w:256,h:256}},"leaves0023.png":{frame:{x:971,y:247,w:217,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:20,y:26,w:217,h:217},sourceSize:{w:256,h:256}},"leaves0024.png":{frame:{x:1573,y:683,w:201,h:204},rotated:!1,trimmed:!0,spriteSourceSize:{x:28,y:31,w:201,h:204},sourceSize:{w:256,h:256}},"leaves0025.png":{frame:{x:1776,y:683,w:183,h:197},rotated:!1,trimmed:!0,spriteSourceSize:{x:38,y:28,w:183,h:197},sourceSize:{w:256,h:256}},"leaves0026.png":{frame:{x:1779,y:882,w:178,h:189},rotated:!1,trimmed:!0,spriteSourceSize:{x:46,y:25,w:178,h:189},sourceSize:{w:256,h:256}},"leaves0027.png":{frame:{x:186,y:683,w:181,h:184},rotated:!1,trimmed:!0,spriteSourceSize:{x:44,y:23,w:181,h:184},sourceSize:{w:256,h:256}},"leaves0028.png":{frame:{x:1,y:492,w:185,h:189},rotated:!1,trimmed:!0,spriteSourceSize:{x:42,y:21,w:185,h:189},sourceSize:{w:256,h:256}},"leaves0029.png":{frame:{x:697,y:488,w:188,h:194},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:19,w:188,h:194},sourceSize:{w:256,h:256}},"leaves0030.png":{frame:{x:1109,y:705,w:190,h:199},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:17,w:190,h:199},sourceSize:{w:256,h:256}},"leaves0031.png":{frame:{x:1375,y:701,w:194,h:204},rotated:!1,trimmed:!0,spriteSourceSize:{x:38,y:15,w:194,h:204},sourceSize:{w:256,h:256}},"leaves0032.png":{frame:{x:1375,y:491,w:196,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:37,y:13,w:196,h:208},sourceSize:{w:256,h:256}},"leaves0033.png":{frame:{x:1174,y:491,w:199,h:212},rotated:!1,trimmed:!0,spriteSourceSize:{x:36,y:12,w:199,h:212},sourceSize:{w:256,h:256}},"leaves0034.png":{frame:{x:971,y:466,w:201,h:216},rotated:!1,trimmed:!0,spriteSourceSize:{x:35,y:10,w:201,h:216},sourceSize:{w:256,h:256}},"leaves0051.png":{frame:{x:491,y:488,w:204,h:203},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:45,w:204,h:203},sourceSize:{w:256,h:256}},"leaves0052.png":{frame:{x:1571,y:889,w:206,h:187},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:45,w:206,h:187},sourceSize:{w:256,h:256}},"leaves0053.png":{frame:{x:697,y:684,w:206,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:45,w:206,h:181},sourceSize:{w:256,h:256}},"leaves0054.png":{frame:{x:1190,y:247,w:207,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:45,w:207,h:180},sourceSize:{w:256,h:256}},"leaves0055.png":{frame:{x:188,y:492,w:176,h:179},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:46,w:176,h:179},sourceSize:{w:256,h:256}},"leaves0056.png":{frame:{x:369,y:693,w:176,h:179},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:46,w:176,h:179},sourceSize:{w:256,h:256}},"leaves0057.png":{frame:{x:547,y:867,w:175,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:47,w:175,h:178},sourceSize:{w:256,h:256}},"leaves0058.png":{frame:{x:724,y:867,w:175,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:47,w:175,h:178},sourceSize:{w:256,h:256}},"leaves0059.png":{frame:{x:901,y:889,w:174,h:177},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:47,w:174,h:177},sourceSize:{w:256,h:256}},"leaves0060.png":{frame:{x:1,y:869,w:174,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:48,w:174,h:176},sourceSize:{w:256,h:256}},"leaves0061.png":{frame:{x:177,y:869,w:173,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:40,y:49,w:173,h:175},sourceSize:{w:256,h:256}},"leaves0062.png":{frame:{x:352,y:874,w:172,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:49,w:172,h:174},sourceSize:{w:256,h:256}},"leaves0063.png":{frame:{x:1077,y:906,w:172,h:173},rotated:!1,trimmed:!0,spriteSourceSize:{x:41,y:50,w:172,h:173},sourceSize:{w:256,h:256}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"booster01-destroy.png",format:"RGBA8888",size:{w:1960,h:1080},scale:"1"}}},{}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"cascade0000.png":{frame:{x:1,y:357,w:70,h:171},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:171},sourceSize:{w:70,h:330}},"cascade0001.png":{frame:{x:1,y:1,w:70,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:176},sourceSize:{w:70,h:330}},"cascade0002.png":{frame:{x:1,y:530,w:70,h:171},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:171},sourceSize:{w:70,h:330}},"cascade0003.png":{frame:{x:1,y:179,w:70,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:176},sourceSize:{w:70,h:330}},"cascade0004.png":{frame:{x:1,y:703,w:70,h:166},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:166},sourceSize:{w:70,h:330}},"cascade0005.png":{frame:{x:145,y:755,w:70,h:142},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:142},sourceSize:{w:70,h:330}},"cascade0006.png":{frame:{x:145,y:460,w:70,h:147},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:147},sourceSize:{w:70,h:330}},"cascade0007.png":{frame:{x:145,y:156,w:70,h:151},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:151},sourceSize:{w:70,h:330}},"cascade0008.png":{frame:{x:73,y:492,w:70,h:156},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:156},sourceSize:{w:70,h:330}},"cascade0009.png":{frame:{x:73,y:168,w:70,h:160},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:160},sourceSize:{w:70,h:330}},"cascade0010.png":{frame:{x:145,y:1,w:70,h:153},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:153},sourceSize:{w:70,h:330}},"cascade0011.png":{frame:{x:145,y:609,w:70,h:144},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:144},sourceSize:{w:70,h:330}},"cascade0012.png":{frame:{x:145,y:309,w:70,h:149},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:149},sourceSize:{w:70,h:330}},"cascade0013.png":{frame:{x:73,y:650,w:70,h:154},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:154},sourceSize:{w:70,h:330}},"cascade0014.png":{frame:{x:73,y:330,w:70,h:160},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:160},sourceSize:{w:70,h:330}},"cascade0015.png":{frame:{x:73,y:1,w:70,h:165},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:70,h:165},sourceSize:{w:70,h:330}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"cascade.png",format:"RGBA8888",size:{w:216,h:898},scale:"1"}}},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"Hunter Dancing_no_tongue_v04_00000.png":{frame:{x:261,y:123,w:130,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:33,y:39,w:130,h:117},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00001.png":{frame:{x:133,y:367,w:133,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:32,y:39,w:133,h:115},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00002.png":{frame:{x:133,y:250,w:134,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:33,y:31,w:134,h:115},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00003.png":{frame:{x:1,y:130,w:135,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:34,y:27,w:135,h:116},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00004.png":{frame:{x:129,y:1,w:134,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:33,y:27,w:134,h:120},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00005.png":{frame:{x:1,y:248,w:130,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:34,y:25,w:130,h:124},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00006.png":{frame:{x:1,y:1,w:126,h:127},rotated:!1,trimmed:!0,spriteSourceSize:{x:34,y:28,w:126,h:127},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00007.png":{frame:{x:138,y:123,w:121,h:125},rotated:!1,trimmed:!0,spriteSourceSize:{x:34,y:32,w:121,h:125},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00008.png":{frame:{x:269,y:242,w:120,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:36,y:38,w:120,h:119},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00009.png":{frame:{x:269,y:363,w:122,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:36,y:39,w:122,h:118},sourceSize:{w:200,h:180}},"Hunter Dancing_no_tongue_v04_00010.png":{frame:{x:265,y:1,w:125,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:34,y:42,w:125,h:115},sourceSize:{w:200,h:180}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"hunter.png",format:"RGBA8888",size:{w:392,h:483},scale:"1"}}},{}],8:[function(e,t,i){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(i,"__esModule",{value:!0});var s=e("./amelia.js"),r=a(s),n=e("./booster01-destroy.js"),o=a(n),h=e("./cascade.js"),l=a(h),c=e("./hunter.js"),d=a(c),u=e("./piece-destroy.js"),g=a(u),f=e("./pieces.js"),m=a(f),p=e("./sprites.js"),y=a(p);i.default={amelia:r.default,"booster01-destroy":o.default,cascade:l.default,hunter:d.default,"piece-destroy":g.default,pieces:m.default,sprites:y.default}},{"./amelia.js":4,"./booster01-destroy.js":5,"./cascade.js":6,"./hunter.js":7,"./piece-destroy.js":9,"./pieces.js":10,"./sprites.js":11}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"destroy0000.png":{frame:{x:6,y:1,w:13,h:13},rotated:!1,trimmed:!0,spriteSourceSize:{x:17,y:18,w:13,h:13},sourceSize:{w:50,h:50}},"destroy0001.png":{frame:{x:21,y:1,w:24,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:12,y:13,w:24,h:23},sourceSize:{w:50,h:50}},"destroy0002.png":{frame:{x:1,y:26,w:31,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:9,y:9,w:31,h:32},sourceSize:{w:50,h:50}},"destroy0003.png":{frame:{x:1,y:60,w:36,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:6,y:6,w:36,h:38},sourceSize:{w:50,h:50}},"destroy0004.png":{frame:{x:1,y:100,w:41,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:4,y:4,w:41,h:42},sourceSize:{w:50,h:50}},"destroy0005.png":{frame:{x:1,y:144,w:43,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:3,w:43,h:45},sourceSize:{w:50,h:50}},"destroy0006.png":{frame:{x:1,y:191,w:46,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:2,w:46,h:45},sourceSize:{w:50,h:50}},"destroy0007.png":{frame:{x:1,y:285,w:48,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:2,w:48,h:46},sourceSize:{w:50,h:50}},"destroy0008.png":{frame:{x:1,y:431,w:48,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:1,y:2,w:48,h:48},sourceSize:{w:50,h:50}},"destroy0009.png":{frame:{x:1,y:333,w:50,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:2,w:50,h:47},sourceSize:{w:50,h:50}},"destroy0010.png":{frame:{x:1,y:531,w:50,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1,w:50,h:49},sourceSize:{w:50,h:50}},"destroy0011.png":{frame:{x:1,y:582,w:50,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1,w:50,h:49},sourceSize:{w:50,h:50}},"destroy0012.png":{frame:{x:1,y:382,w:50,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:2,w:50,h:47},sourceSize:{w:50,h:50}},"destroy0013.png":{frame:{x:1,y:633,w:50,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1,w:50,h:49},sourceSize:{w:50,h:50}},"destroy0014.png":{frame:{x:1,y:481,w:50,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:2,w:50,h:48},sourceSize:{w:50,h:50}},"destroy0015.png":{frame:{x:1,y:684,w:50,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1,w:50,h:49},sourceSize:{w:50,h:50}},"destroy0016.png":{frame:{x:1,y:735,w:50,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1,w:50,h:49},sourceSize:{w:50,h:50}},"destroy0017.png":{frame:{x:1,y:238,w:48,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:4,w:48,h:45},sourceSize:{w:50,h:50}},"destroy0018.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0019.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0020.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0021.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0022.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0023.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0024.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0025.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0026.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0027.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0028.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0029.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0030.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}},"destroy0031.png":{frame:{x:1,y:1,w:3,h:3},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:3,h:3},sourceSize:{w:50,h:50}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"piece-destroy.png",format:"RGBA8888",size:{w:52,h:785},scale:"1"}}},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"piece01.png":{frame:{x:835,y:1,w:185,h:191},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:4,w:185,h:191},sourceSize:{w:200,h:200}},"piece02.png":{frame:{x:168,y:1,w:152,h:200},rotated:!1,trimmed:!0,spriteSourceSize:{x:24,y:0,w:152,h:200},sourceSize:{w:200,h:200}},"piece03.png":{frame:{x:682,y:1,w:151,h:195},rotated:!1,trimmed:!0,spriteSourceSize:{x:25,y:3,w:151,h:195},sourceSize:{w:200,h:200}},"piece04.png":{frame:{x:322,y:1,w:196,h:196},rotated:!1,trimmed:!0,spriteSourceSize:{x:3,y:1,w:196,h:196},sourceSize:{w:200,h:200}},"piece05.png":{frame:{x:1,y:1,w:165,h:200},rotated:!1,trimmed:!0,spriteSourceSize:{x:15,y:0,w:165,h:200},sourceSize:{w:200,h:200}},"piece06.png":{frame:{x:520,y:1,w:160,h:196},rotated:!1,trimmed:!0,spriteSourceSize:{x:19,y:2,w:160,h:196},sourceSize:{w:200,h:200}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"pieces.png",format:"RGBA8888",size:{w:1021,h:202},scale:"1"}}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{"arrow.png":{frame:{x:768,y:1,w:241,h:207},rotated:!1,trimmed:!0,spriteSourceSize:{x:5,y:1,w:241,h:207},sourceSize:{w:251,h:217}},"board-mask.png":{frame:{x:1,y:1,w:765,h:764},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:765,h:764},sourceSize:{w:765,h:764}},"board.png":{frame:{x:1,y:963,w:533,h:534},rotated:!1,trimmed:!0,spriteSourceSize:{x:19,y:18,w:533,h:534},sourceSize:{w:570,h:575}},"cta.png":{frame:{x:1,y:767,w:654,h:194},rotated:!1,trimmed:!0,spriteSourceSize:{x:53,y:0,w:654,h:194},sourceSize:{w:766,h:194}},"goal-panel.png":{frame:{x:536,y:963,w:484,h:144},rotated:!1,trimmed:!0,spriteSourceSize:{x:49,y:8,w:484,h:144},sourceSize:{w:588,h:153}},"hand.png":{frame:{x:897,y:210,w:77,h:81},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:77,h:81},sourceSize:{w:77,h:81}},"highlight-box-2.png":{frame:{x:768,y:210,w:127,h:230},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:127,h:230},sourceSize:{w:127,h:230}},"logo.png":{frame:{x:657,y:767,w:334,h:180},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:334,h:180},sourceSize:{w:334,h:180}},"tooltip.png":{frame:{x:536,y:1109,w:462,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:8,y:22,w:462,h:221},sourceSize:{w:480,h:245}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"sprites.png",format:"RGBA8888",size:{w:1021,h:1498},scale:"1"}}},{}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={height:7,layers:[{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:7,name:"bottom",opacity:1,type:"tilelayer",visible:!0,width:7,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:7,name:"under",opacity:1,type:"tilelayer",visible:!0,width:7,x:0,y:0},{data:[3,5,5,7,4,7,5,3,3,4,3,7,5,4,6,4,6,6,3,4,7,4,7,3,4,6,3,6,2,4,7,4,7,4,2,6,3,2,7,4,5,7,3,2,3,7,3,5,2],height:7,name:"pieces",opacity:1,type:"tilelayer",visible:!0,width:7,x:0,y:0}],nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.0.3",tileheight:207,tilesets:[{columns:0,firstgid:1,grid:{height:1,orientation:"orthogonal",width:1},margin:0,name:"pieces",spacing:0,tilecount:6,tileheight:200,tiles:{1:{image:"../../pieces/piece06.png",imageheight:200,imagewidth:200},2:{image:"../../pieces/piece01.png",imageheight:200,imagewidth:200},3:{image:"../../pieces/piece02.png",imageheight:200,imagewidth:200},4:{image:"../../pieces/piece03.png",imageheight:200,imagewidth:200},5:{image:"../../pieces/piece04.png",imageheight:200,imagewidth:200},6:{image:"../../pieces/piece05.png",imageheight:200,imagewidth:200}},tilewidth:200}],tilewidth:207,type:"map",version:1,width:7}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={height:14,layers:[{data:[6,4,2,4,3,3,3,6,5,6,5,7,7,3,3,5,3,2,4,6,6,5,4,7,2,3,2,7,4,4,4,5,6,7,5,4,5,6,5,5,3,5,4,5,4,5,7,2,5,2,3,3,4,6,7,3,7,5,4,6,2,5,2,3,2,3,4,7,3,2,5,3,7,6,6,5,6,4,3,4,3,4,5,5,7,4,6,4,6,5,3,5,6,3,4,3,4,4],height:14,name:"fall-pieces",opacity:1,type:"tilelayer",visible:!0,width:7,x:0,y:0}],nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.0.3",tileheight:207,tilesets:[{columns:0,firstgid:1,grid:{height:1,orientation:"orthogonal",width:1},margin:0,name:"pieces",spacing:0,tilecount:6,tileheight:200,tiles:{1:{image:"../../pieces/piece06.png",imageheight:200,imagewidth:200},2:{image:"../../pieces/piece01.png",imageheight:200,imagewidth:200},3:{image:"../../pieces/piece02.png",imageheight:200,imagewidth:200},4:{image:"../../pieces/piece03.png",imageheight:200,imagewidth:200},5:{image:"../../pieces/piece04.png",imageheight:200,imagewidth:200},6:{image:"../../pieces/piece05.png",imageheight:200,imagewidth:200}},tilewidth:200}],tilewidth:207,type:"map",version:1,width:7}},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={swipe:{none:[],"4-horizontal":[{h:4,v:1}],"4-vertical":[{h:1,v:4}],mixture:[{h:3,v:3},{h:3,v:4},{h:4,v:3},{h:2,v:3},{h:3,v:2},{h:2,v:4},{h:4,v:2},{h:2,v:2}],"5-in-a-line":[{h:5,v:1},{h:5,v:1},{h:5,v:2},{h:1,v:5},{h:1,v:5},{h:2,v:5}]}}},{}],15:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=e("../settings"),r=a(s),n=e("../publish-settings"),o=a(n),h=e("./states/boot"),l=a(h),c=e("./states/endcard"),d=a(c),u=e("./states/preloader"),g=a(u),f=new Phaser.Game(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);o.default.publish[r.default.settingsOveride];if(r.default.settingsOveride&&o.default.publish[r.default.settingsOveride])for(var m in o.default.publish[r.default.settingsOveride])o.default.publish[r.default.settingsOveride].hasOwnProperty(m)&&(r.default[m]=o.default.publish[r.default.settingsOveride][m]);f.state.add("boot",new l.default),f.state.add("endcard",new d.default),f.state.add("preloader",new g.default),f.state.start("boot");var p=document.getElementById("vungle-close");!1===r.default.timer&&(p.className="",setTimeout(function(){p.style.WebkitTransition="opacity 0.5s"},0))},{"../publish-settings":2,"../settings":3,"./states/boot":21,"./states/endcard":22,"./states/preloader":23}],16:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=e("../utils/blast"),h=s(o),l=e("../utils/tweener"),c=s(l),d=e("../utils/util"),u=s(d),g=e("../board/board"),f=a(g),m=e("../const/boosters"),p=a(m),y=e("../utils/custom-bounce"),w=a(y),x=e("../board/fall-pieces"),v=a(x),b=e("../../settings"),S=a(b),P=function(){function e(t){r(this,e),this.game=t,this.el=document.getElementById("board-inner"),this.elRect=this.el.getBoundingClientRect(),this.boardData=f.default,this.fallPieces=v.default,this.boardWidth=this.boardData.layers[0].width,this.boardHeight=this.boardData.layers[0].height,this.tileWidth=this.elRect.width*window.devicePixelRatio/this.boardWidth,this.numberOfTiles=this.boardWidth*this.boardHeight,this.initTileIds(),this.initFallPieces(),this.initGoals(),this.initBoosters(),this.createGrid(),this.swipeDuration=150,this.comboDuration=150,this.staggerDelay=80,this.flySpeed=200,this.game.onInteract.add(this.onInteract,this),this.game.onGameComplete.add(this.onGameComplete,this)}return n(e,[{key:"initBoosters",value:function(){this.boosters=[];var e;for(var t in S.default)S.default.hasOwnProperty(t)&&0===t.indexOf("booster")&&(e=S.default[t],e.toGenerate="tap"===S.default.interactionType?e.piecesToCreate:p.default[S.default.interactionType][e.piecesToCreate],e.key=t,e.toGenerate||console.error('Unknown piecesToCreate setting "'+e.piecesToCreate+'"'),this.boosters.push(e))}},{key:"initGoals",value:function(){this.goals={};for(var e in S.default)if(S.default.hasOwnProperty(e)&&0===e.indexOf("goal")&&(this.goals[S.default[e].item]=e.replace("goal","goal-item-"),void 0!==S.default[e].matchesTo))for(var t=0;t<S.default[e].matchesTo.length;t++)this.goals[S.default[e].matchesTo[t]]=e.replace("goal","goal-item-")}},{key:"initFallPieces",value:function(){var e=this.fallPieces.layers[0].data;this.fallPieces={};for(var t=0,i=0;i<e.length;i++)this.fallPieces[t]=this.fallPieces[t]||[],this.fallPieces[t].unshift(this.tileIds[e[i]]),++t>=this.boardWidth&&(t=0)}},{key:"getBooster",value:function(e,t){for(var i=this.getMatchComponents(e,t),a=0;a<this.boosters.length;a++)for(var s=0;s<this.boosters[a].toGenerate.length;s++){if("swipe"===S.default.interactionType&&i.h===this.boosters[a].toGenerate[s].h&&i.v===this.boosters[a].toGenerate[s].v)return this.boosters[a];if("tap"===S.default.interactionType)for(var r=0;r<this.boosters[a].piecesToCreate.length;r++)if(t.length===this.boosters[a].piecesToCreate[r])return this.boosters[a]}return null}},{key:"getMatchComponents",value:function(e,t){var i=0,a=0;return t.forEach(function(t){a+=e.settings.y===t.settings.y?1:0,i+=e.settings.x===t.settings.x?1:0},this),{v:i,h:a}}},{key:"createGrid",value:function(){this.createLayers(),this.tiles=[],this.belowTiles=[],this.bottomTiles=[],this.boardLayout=[],this.highPoints={},this.lowPoints={};for(var e,t=0,i=0,a=0;a<this.numberOfTiles;a++)0!==this.aboveLayer[a]&&(this.highPoints[t]=Math.min(void 0===this.highPoints[t]?i:this.highPoints[t],i),this.lowPoints[t]=Math.max(void 0===this.lowPoints[t]?i:this.highPoints[t],i),this.aboveLayerGrp.add(this.createTile(this.tileIds[this.aboveLayer[a]],t,i,S.default.piecePadding,this.tiles)),this.boardLayout.push({x:t,y:i})),0!==this.belowLayer[a]&&this.belowLayerGrp.add(this.createTile(this.tileIds[this.belowLayer[a]],t,i,S.default.belowPiecePadding,this.belowTiles)),0!==this.bottomLayer[a]&&(e=this.createTile(this.tileIds[this.bottomLayer[a]],t,i,S.default.belowPiecePadding,this.bottomTiles),e.anchor.set(.5,.75),this.bottomLayerGrp.add(e)),++t>=this.boardWidth&&(t=0,i++);this.bgLayerGrp.add(this.createItem("sprites","board","board")),this.createOverlay(),"tap"===S.default.interactionType&&this.toggleTapBoosterIndicators()}},{key:"createOverlay",value:function(){this.overlay&&this.overlay.destroy(),
this.overlay=this.createItem("sprites","board-mask","board-mask"),this.overlay.alpha=0,this.overlayLayerGrp.add(this.overlay)}},{key:"initTileIds",value:function(){this.tileIds={};var e=this.boardData.tilesets[0];for(var t in e.tiles)e.tiles.hasOwnProperty(t)&&(this.tileIds[parseInt(t)+1]=e.tiles[t].image.replace("../../pieces/","").replace(".png",""))}},{key:"createLayers",value:function(){this.bgLayerGrp=this.game.add.group(),this.bottomLayerGrp=this.game.add.group(),this.belowLayerGrp=this.game.add.group(),this.aboveLayerGrp=this.game.add.group(),this.overlayLayerGrp=this.game.add.group();this.boardData.tilesets[0];for(var e in this.boardData.layers)this.boardData.layers.hasOwnProperty(e)&&("pieces"===this.boardData.layers[e].name&&(this.aboveLayer=this.boardData.layers[e].data),"under"===this.boardData.layers[e].name&&(this.belowLayer=this.boardData.layers[e].data),"bottom"===this.boardData.layers[e].name&&(this.bottomLayer=this.boardData.layers[e].data));this.aboveLayerGrp.x=this.elRect.left*window.devicePixelRatio,this.aboveLayerGrp.y=this.elRect.top*window.devicePixelRatio,this.belowLayerGrp.x=this.elRect.left*window.devicePixelRatio,this.belowLayerGrp.y=this.elRect.top*window.devicePixelRatio,this.bottomLayerGrp.x=this.elRect.left*window.devicePixelRatio,this.bottomLayerGrp.y=this.elRect.top*window.devicePixelRatio,this.x=this.aboveLayerGrp.x,this.y=this.aboveLayerGrp.y}},{key:"createTile",value:function(e,t,i,a,s){var r=this.genSpriteOrAnim("pieces",e,e+"-idle",t,i,a);return r.settings={key:e,x:t,y:i,plusNumber:0},-1!==e.indexOf("booster")&&S.default[e]&&(r.settings=u.extend(r.settings,S.default[e])),s&&s.push(r),r}},{key:"createItem",value:function(e,t,i){var a=new Phaser.Sprite(this.game,0,0,e,t+".png");return a.anchor.set(.5,.5),u.spriteToDom(i,a),a}},{key:"showOverlay",value:function(){u.fade(this.overlay,1,300)}},{key:"hideOverlay",value:function(){u.fade(this.overlay,0,300)}},{key:"getTileAt",value:function(e,t,i){for(var a=0;a<i.length;a++)if(i[a].settings.x===e&&i[a].settings.y===t)return i[a];return null}},{key:"getMatches",value:function(e,t,i,a,s,r,n){t=void 0===t||t,i=void 0===i||i,a=void 0===a||a,s=void 0===s||s,n=void 0===n||n,r=r||[],r.push(e);var o=this.getTileAt(e.settings.x+0,e.settings.y-1,this.tiles),h=this.getTileAt(e.settings.x+0,e.settings.y+1,this.tiles),l=this.getTileAt(e.settings.x-1,e.settings.y+0,this.tiles),c=this.getTileAt(e.settings.x+1,e.settings.y+0,this.tiles);return-1!==e.settings.key.indexOf("blocker")?r:(!0!==t||null===o||o.settings.key!==e.settings.matchesTo&&e.settings.key!==o.settings.matchesTo&&o.settings.key!==e.settings.key||-1!==r.indexOf(o)||(!0===n?r.concat(this.getMatches(o,!0,!1,!1,!1,r,n)):r.concat(this.getMatches(o,!0,!0,!0,!0,r,n))),!0!==i||null===h||h.settings.key!==e.settings.matchesTo&&e.settings.key!==h.settings.matchesTo&&h.settings.key!==e.settings.key||-1!==r.indexOf(h)||(!0===n?r.concat(this.getMatches(h,!1,!0,!1,!1,r,n)):r.concat(this.getMatches(h,!0,!0,!0,!0,r,n))),!0!==a||null===l||l.settings.key!==e.settings.matchesTo&&e.settings.key!==l.settings.matchesTo&&l.settings.key!==e.settings.key||-1!==r.indexOf(l)||(!0===n?r.concat(this.getMatches(l,!1,!1,!0,!1,r,n)):r.concat(this.getMatches(l,!0,!0,!0,!0,r,n))),!0!==s||null===c||c.settings.key!==e.settings.matchesTo&&e.settings.key!==c.settings.matchesTo&&c.settings.key!==e.settings.key||-1!==r.indexOf(c)||(!0===n?r.concat(this.getMatches(c,!1,!1,!1,!0,r,n)):r.concat(this.getMatches(c,!0,!0,!0,!0,r,n))),r)}},{key:"moveToLinear",value:function(e,t,i,a,s){this.moveTo(e,t*this.tileWidth+.5*this.tileWidth,i*this.tileWidth+.5*this.tileWidth,a,Phaser.Easing.Linear.None,function(){e.settings.x=t,e.settings.y=i,s&&s(e)})}},{key:"moveTo",value:function(e,t,i,a,s,r){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=this.game.add.tween(e).to({x:t,y:i},a,s,!0,n);r&&o.onComplete.add(r,this)}},{key:"swipe",value:function(e){var t=e.highlightTiles[0],i=e.highlightTiles[1],a=this.getTileAt(t.x,t.y,this.tiles),s=this.getTileAt(i.x,i.y,this.tiles);this.moveToLinear(a,i.x,i.y,this.swipeDuration),this.moveToLinear(s,t.x,t.y,this.swipeDuration),this.game.time.events.add(this.swipeDuration+50,function(){this.handleMatches([a,s]),e.floatText&&this.game.time.events.add(50,function(){this.floatText(e.floatText)},this)},this)}},{key:"tap",value:function(e){var t=e.highlightTiles[0],i=this.getTileAt(t.x,t.y,this.tiles);this.handleMatches([i]),e.floatText&&this.game.time.events.add(50,function(){this.floatText(e.floatText)},this)}},{key:"removeTile",value:function(e){u.remove(this.tiles,e),u.remove(this.belowTiles,e),e.destroy()}},{key:"genSpriteOrAnim",value:function(e,t,i,a,s,r){var n,o,h=this.game.cache.checkImageKey(i);if(!0===h){n=new Phaser.Sprite(this.game,a*this.tileWidth,s*this.tileWidth,i),o=this.tileWidth*(1-u.toPerc(r))/n._frame.width,n.animations.add("anim");var l=30,c=!0,d=1;S.default.animations[i]&&(l=void 0!==S.default.animations[i].fps?S.default.animations[i].fps:30,c=void 0===S.default.animations[i].loop||S.default.animations[i].loop,d=void 0!==S.default.animations[i].scale?S.default.animations[i].scale:1),o*=d,n.animations.play("anim",l,c,!0)}else n=new Phaser.Sprite(this.game,a*this.tileWidth,s*this.tileWidth,e,t+".png"),o=this.tileWidth*(1-u.toPerc(r))/n._frame.width;return n.anchor.set(.5,.5),n.scale.x=o,n.scale.y=o,n.x+=.5*this.tileWidth,n.y+=.5*this.tileWidth,n}},{key:"createAndFireProjectile",value:function(e,t){if(e.parent&&e.settings.projectile){var i=this.game.add.group(),a=this.genSpriteOrAnim("sprites",e.settings.projectile,e.settings.projectile,e.settings.x,e.settings.y,"0%");a.x=0,a.y=0,i.x=e.x+e.parent.x,i.y=e.y+e.parent.y,a.scale.x=a.scale.x*(e.settings.projectileScale||1),a.scale.y=a.scale.y*(e.settings.projectileScale||1);var s=this.tileWidth/this.staggerDelay,r=this.tileWidth*this.boardWidth*2,n=r/s,o=0,h=0,l=1,d=1;switch(t){case"left":o-=r,l=-1;break;case"right":o+=r;break;case"up":h-=r;break;case"down":h+=r,d=-1}if(a.scale.x=a.scale.x*l,a.scale.y=a.scale.y*d,c.moveTo(i,i.x+o,i.y+h,0,n,Phaser.Easing.Linear.None),e.settings.projectileTrail){var u=this.genSpriteOrAnim(null,null,"trail",a.x,a.y,"0%");u.x=0-.03*a.width,u.y=0,u.anchor.set(.5,0);var g=u.scale.x*(e.settings.projectileScale||1)*l,f=u.scale.y*(e.settings.projectileScale||1)*d;u.scale.x=.6*g,u.scale.y=0,i.add(u),c.scaleTo(u,g,.3*f,0,800,Phaser.Easing.Linear.None)}i.add(a),this.game.world.bringToTop(i),this.game.add.existing(i)}}},{key:"explode",value:function(e,t,i,a){var s=e.settings.x,r=e.settings.y,n=this.goals[e.settings.key];this.game.time.events.add(i?this.staggerDelay*t:0,function(){if(e.settings.projectile){var t="horizontal"===e.settings.destroys||"left"===e.settings.destroys,i="horizontal"===e.settings.destroys||"right"===e.settings.destroys,o="vertical"===e.settings.destroys||"u"===e.settings.destroys,h="vertical"===e.settings.destroys||"d"===e.settings.destroys;!0===t&&this.createAndFireProjectile(e,"left"),!0===i&&this.createAndFireProjectile(e,"right"),!0===o&&this.createAndFireProjectile(e,"up"),!0===h&&this.createAndFireProjectile(e,"down")}if(e.settings.destroyAnim&&this.playAnimation(e,e.settings.destroyAnim),void 0!==n){if(!e.parent)return;var l=this.createTile(e.settings.key,e.settings.x,e.settings.y,S.default.piecePadding);l.x+=e.parent.x,l.y+=e.parent.y,this.game.add.existing(l),this.removeTile(e),this.flyToGoal(n,l)}else{var d=e.settings.destroyAnim||e.settings.key+"-destroy",u=this.game.cache.checkImageKey(d);if(u||-1===e.settings.key.indexOf("piece")||(d="piece-destroy"),u=this.game.cache.checkImageKey(d),!0===u&&!0!==a&&this.playAnimation(e,d),!0===S.default.tileScaleDownOnDestroy&&e.parent&&-1===e.settings.key.indexOf("booster")){var g=this.createTile(e.settings.key,e.settings.x,e.settings.y,S.default.piecePadding);g.x+=e.parent.x,g.y+=e.parent.y,this.game.add.existing(g),c.scaleTo(g,1.1*e.scale.x,1.1*e.scale.x,0,.4*S.default.tileScaleDownOnDestroyDuration,Phaser.Easing.Linear.None,function(){c.scaleTo(g,0,0,0,.6*S.default.tileScaleDownOnDestroyDuration,Phaser.Easing.Back.Out)})}this.game.add.tween(e.scale).to({x:0,y:0},500,Phaser.Easing.Linear.None,!0).onComplete.add(function(){this.removeTile(e)},this)}e.settings.onDestroyGenerate&&this.aboveLayerGrp.add(this.createTile(e.settings.onDestroyGenerate,s,r,S.default.piecePadding,this.tiles)),this.removeUnderTile(e)},this)}},{key:"flyToGoal",value:function(e,t,i){var a=this.game.state.states.endcard.goal[e],s=a.x,r=a.y;t.settings.goalItem=e;var n=this.tileWidth*this.boardWidth/Phaser.Math.distance(t.x,t.y,s,r),o=n/this.flySpeed*8e4;this.moveTo(t,s,r,o,Phaser.Easing.Linear.None,function(e){this.game.onGetGoalItem.dispatch(e.settings.goalItem),e.destroy(),i&&i(e)},200);this.game.add.tween(t.scale).to({x:[3*t.scale.x,a.scale.x],y:[3*t.scale.y,a.scale.y]},o,Phaser.Easing.Linear.None,!0,0)}},{key:"removeUnderTile",value:function(e){var t=this.getTileAt(e.settings.x,e.settings.y,this.belowTiles);if(null!==t&&!0!==t.isDead){var i=this.belowTiles.indexOf(t);this.belowTiles.splice(i,1),t.isDead=!0;var a=Number(t.settings.key.replace("under-piece",""));if(a>1&&this.belowLayerGrp.add(this.createTile("under-piece0"+(a-1),t.settings.x,t.settings.y,S.default.belowPiecePadding,this.belowTiles)),a>0){var s,r;this.bottomTiles.forEach(function(e){if(s=this.getTileAt(e.settings.x,e.settings.y-1,this.belowTiles),r=this.getTileAt(e.settings.x,e.settings.y,this.belowTiles),null===s&&null===r&&!0!==e.isDead){e.isDead=!0,e.alpha=0;var t=this.game.add.sprite(0,0,"pieces",e.settings.key+".png");t.x=e.x+e.parent.x,t.y=e.y+e.parent.y,t.scale.x=e.scale.x,t.scale.y=e.scale.y,t.anchor.x=e.anchor.x,t.anchor.y=e.anchor.y,t.settings=e.settings,this.isCollecting=!0;var i=this;c.wobbleScaleIn(t,15,2,1.5,function(e){i.flyToGoal(i.goals[e.settings.key],e,function(){!0===i.isCollecting&&(i.isCollecting=!1,!0===i.isFinishedFalling&&i.game.time.events.add(500,function(){i.game.finishInteraction()},i))})})}},this),c.fade(t,0,0,500,Phaser.Easing.Linear.None,!0,function(){})}}}},{key:"playAnimation",value:function(e,t){if(e.parent){var i=S.default.animations[t];if(i){var a=new Phaser.Sprite(this.game,e.x+e.parent.x,e.y+e.parent.y,t);a.anchor.set(.5,.5),a.scale.x=e.scale.x*(i.scale||1)*5,a.scale.y=e.scale.y*(i.scale||1)*5,a.animations.add("anim"),a.animations.play("anim",i.fps,i.loop,!0),this.game.add.existing(a)}}}},{key:"getBlastMatches",value:function(e){var t=[],i=[];switch(e.settings.destroys){case"left":t=h.left(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"right":t=h.right(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"up":t=h.up(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"down":t=h.down(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"horizontal":t=h.horizontal(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"vertical":t=h.vertical(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"horizontalAndVertical":t=h.horizontalAndVertical(e.settings.x,e.settings.y,this.boardWidth,this.boardHeight);break;case"blast1":t=h.blast1(e.settings.x,e.settings.y);break;case"blast2":t=h.blast2(e.settings.x,e.settings.y);break;case"colorMatch":t=h.colorMatch(e.settings.x,e.settings.y)}return t.forEach(function(e){i.push(this.getTileAt(e.x,e.y,this.tiles))},this),i}},{key:"handleMatches",value:function(e){for(var t,i,a,s,r,n=!1,o=0,h=300,l=[],c=0;c<e.length;c++)null!==e[c]&&!0!==e[c].settings.dontMatch&&(s=[],t=this.getMatches(e[c],!0,!0,!0,!0,[],"swipe"===S.default.interactionType),i=this.getBooster(e[c],t),a=this.getMatchComponents(e[c],t),0===e[c].settings.key.indexOf("booster")&&(s=this.getBlastMatches(e[c])),("swipe"===S.default.interactionType&&(a.h>=3||a.v>=3||s.length>0)||"tap"===S.default.interactionType&&(t.length>=2||s.length>0))&&(n=!0,t=t.concat(s),t.forEach(function(e){e&&e.settings&&(e.settings.dontMatch=!0)},this),null!==i?(r=this.boosterMatch(e[c],t,i),l=l.concat(r.holes),l.push(e[c].settings),o=Math.max(o,r.delay),h=i.delay,this.playAnimation(e[c],i.animation)):(t=t.concat(this.addBlockerMatches(t)),h=Math.max(h||0,e[c].settings.delay||0),l=l.concat(this.getHolesFromMatches(e[c],t)),l.push(e[c].settings),h+=s.length*this.staggerDelay,this.explodeMatches(t,s.length>0,e[c].settings))));"tap"===S.default.interactionType&&(h+=500),!1===n?(this.isFinishedFalling=!0,!0!==this.isCollecting&&this.finishInteraction()):this.game.time.events.add(o+h+50,function(){console.log("delay"+o+"extraDelay"+h);var e=this.fall(l);this.game.time.events.add(e.fallInfo.maxTime+80,function(){"swipe"===S.default.interactionType?this.handleMatches(e.fallTiles):(this.game.time.events.add(200,function(){this.toggleTapBoosterIndicators()},this),this.finishInteraction())},this)},this)}},{key:"addBlockerMatches",value:function(e){var t,i,a,s,r=[];return e.forEach(function(e){t=this.getTileAt(e.settings.x+0,e.settings.y-1,this.tiles),i=this.getTileAt(e.settings.x+0,e.settings.y+1,this.tiles),a=this.getTileAt(e.settings.x-1,e.settings.y+0,this.tiles),s=this.getTileAt(e.settings.x+1,e.settings.y+0,this.tiles),null!==t&&-1!==t.settings.key.indexOf("blocker")&&r.push(t),null!==i&&-1!==i.settings.key.indexOf("blocker")&&r.push(i),null!==a&&-1!==a.settings.key.indexOf("blocker")&&r.push(a),null!==s&&-1!==s.settings.key.indexOf("blocker")&&r.push(s)},this),r}},{key:"getHolesFromMatches",value:function(e,t){var i=[];return t.forEach(function(t){null!==t&&(t.settings.x===e.settings.x&&t.settings.y===e.settings.y||t.settings.onDestroyGenerate||i.push(u.clone(t.settings)))},this),u.uniq(i)}},{key:"boosterMatch",value:function(e,t,i){var a=(e.settings.x,e.settings.y,this.getHolesFromMatches(e,t));t.forEach(function(e){this.removeUnderTile(e)},this);var s=this.goals[t[0].settings.key],r=void 0!==s?(t.length-1)*this.staggerDelay:0;return this.game.time.events.add(this.comboDuration+30,function(){var e=void 0!==this.goals[t[0].settings.key];this.explodeMatches(t,e,null,!0)},this),{holes:a,delay:this.comboDuration+r}}},{key:"explodeMatches",value:function(e,t,i,a){e.forEach(function(e,s){null!==e&&(i&&(s=Math.max(Math.abs(e.settings.x-i.x),Math.abs(e.settings.y-i.y))),this.explode(e,s,t,a))},this)}},{key:"fall",value:function(e){this.genNewFallTiles(e);var t=this.getFallInfo(e),i=[],a=0;return this.tiles.forEach(function(t){a=0,e.forEach(function(e){e.x===t.settings.x&&(a+=(!0===S.default.fallUpwards?e.y<t.settings.y:e.y>t.settings.y)?1:0)},this),a>0&&(this.fallTile(t,a),i.push(t))},this),{fallTiles:i,fallInfo:t}}},{key:"fallTile",value:function(e,t){var i=this.game.add.tween(e),a=this.game.add.tween(e.scale),s=e.y+t*this.tileWidth*(!0===S.default.fallUpwards?-1:1),r=e.scale.x,n=e.scale.y;if("bounce"===S.default.fallStyle){var o=new w.default({strength:S.default.tileBounce});i.to({y:s},u.calcQuadTime(e.y-s)*S.default.tileBounce*5*(1/S.default.gravity),function(e){return o.Bounce.Ease(e)},!0),a.to({x:[.8*r,.5*r,r,1.2*r,.9*r,1.1*r,.9*r,r],y:[1.2*n,1.5*n,n,.8*n,1.1*n,.9*n,1.1*n,n]},1.6*u.calcQuadTime(e.y-s)*S.default.tileBounce*5*(1/S.default.gravity),function(e){return o.Bounce.Ease(e)},!0)}else i.to({y:s},u.calcQuadTime(e.y-s)*(1/S.default.gravity),Phaser.Easing.Back.Out,!0,0);i.onComplete.add(function(e){e.settings.y=e.settings.y+t*(!0===S.default.fallUpwards?-1:1)},this)}},{key:"getTilesAbove",value:function(e,t){var i=[];return this.tiles.forEach(function(a){a.settings.x===e&&a.settings.y<t&&i.push(a)},this),i}},{key:"getTilesBelow",value:function(e,t){var i=[];return this.tiles.forEach(function(a){a.settings.x===e&&a.settings.y>t&&i.push(a)},this),i}},{key:"getFallInfo",value:function(e){var t,i={},a={},s=[];return e.forEach(function(e){i[e.x]=i[e.x]||0,i[e.x]++,t=t||i[e.x],t<i[e.x]&&(t=i[e.x]),a[e.x]=Math.max(a[e.x]||e.y,e.y),s.push(e.x)},this),{amount:i,start:a,xCoords:u.uniq(s),maxDist:t,maxTime:u.calcQuadTime(this.tileWidth*t)*(1/S.default.gravity)}}},{key:"genNewFallTiles",value:function(e){var t,i;e.forEach(function(e){0===this.fallPieces[e.x].length&&console.error("ran out of fall tiles"),i=!0===S.default.fallUpwards?this.getLowestTileY(e.x)+1:this.getHighestTileY(e.x)-1,t=this.createTile(this.fallPieces[e.x][0],e.x,i,S.default.piecePadding,this.tiles),this.fallPieces[e.x].shift(),this.aboveLayerGrp.add(t)},this)}},{key:"getHighestTileY",value:function(e){var t=this.boardHeight+1;return this.tiles.forEach(function(i){i.settings.x===e&&i.settings.y<t&&(t=i.settings.y)},this),Math.min(t,this.highPoints[e])}},{key:"getLowestTileY",value:function(e){var t=-1;return this.tiles.forEach(function(i){i.settings.x===e&&i.settings.y>t&&(t=i.settings.y)},this),Math.max(t,this.lowPoints[e])}},{key:"toggleTapBoosterIndicators",value:function(){var e,t;this.tiles.forEach(function(i){t=null,e=this.getMatches(i,!0,!0,!0,!0,[],!1),e.length>1&&(this.boosters.forEach(function(i){i.piecesToCreate.forEach(function(a){a===e.length&&(t=i.key)},this)},this),null!==t&&console.log(this.boosters))},this)}},{key:"finishInteraction",value:function(){var e=S.default["interaction"+(this.game.global.interaction-1)];e.actions&&this.processActions(e),e.surpressComplete||this.game.onInteractionComplete.dispatch()}},{key:"processActions",value:function(e){e.actions.forEach(function(e){this.processAction(e)},this)}},{key:"processAction",value:function(e){this.game.time.events.add(e.delay||0,function(){this[e.action](e)},this)}},{key:"floatText",value:function(e){e=u.extend(S.default.floatText,e||{});var t=new Phaser.Text(this.game,0,0,e.text||"",e.style);t.anchor.set(.5,.5),t.x=e.x||0,t.y=e.y||0,void 0!==e.tileX&&void 0!==e.tileY&&(t.x=this.elRect.left*window.devicePixelRatio+e.tileX*this.tileWidth+.5*this.tileWidth,t.y=this.elRect.top*window.devicePixelRatio+e.tileY*this.tileWidth+.5*this.tileWidth),e.offsetX&&(t.x+=this.tileWidth*e.offsetX),e.offsetY&&(t.y+=this.tileWidth*e.offsetY);var i=this.tileWidth,a=i/t.width;t.scale.x=a*(e.scale||1),t.scale.y=a*(e.scale||1);e.distance?(e.distance,this.tileWidth):this.tileWidth;c.scaleThenFade(t,e.delay||0,e.duration||2e3),this.game.add.existing(t)}},{key:"transformTiles",value:function(e){e.tiles.forEach(function(e){this.transformTile(e)},this)}},{key:"fallBoard",value:function(){var e=[];this.boardLayout.forEach(function(t){null===this.getTileAt(t.x,t.y,this.tiles)&&e.push({x:t.x,y:t.y})},this),this.fall(e)}},{key:"endInteraction",value:function(){this.game.onInteractionComplete.dispatch()}},{key:"transformTile",value:function(e){this.game.time.events.add(e.delay||0,function(){var t=this.getTileAt(e.x,e.y,this.tiles);null!==t&&(t.loadTexture("pieces",e.tile+".png"),c.scaleIn(t),t.settings.key=e.tile,this.boosters.forEach(function(i){i.key===e.tile&&(t.settings=u.extend(t.settings,i))},this))},this)}},{key:"destroyTiles",value:function(e){var t,i;e.tiles.forEach(function(e){this.game.time.events.add(e.delay||0,function(){t=this.getTileAt(e.x,e.y,this.tiles),t&&(i=this.getBlastMatches(t),i.forEach(function(e){null!==e&&(this.explode(e),t=this.getTileAt(e.settings.x,e.settings.y,this.tiles),t.settings.isDestroyed=!0)},this)),this.game.time.events.add(50,function(){e.floatText&&(e.floatText.tileX=e.x,e.floatText.tileY=e.y,this.floatText(e.floatText))},this)},this)},this)}},{key:"onInteract",value:function(){if(!0!==this.game.global.gameComplete){this.isCollecting=!1,this.isFinishedFalling=!1;var e=S.default["interaction"+this.game.global.interaction];if(e){if(e.destroyTiles){var t=this.getTileAt(e.destroyTiles[0].x,e.destroyTiles[0].y,this.tiles);return void this.handleMatches([t])}"swipe"===S.default.interactionType&&this.swipe(e),"tap"===S.default.interactionType&&this.tap(e)}}}},{key:"onGameComplete",value:function(){!0===S.default.fadeBoardOnComplete&&(c.fade(this.bgLayerGrp,0,0,1e3,Phaser.Easing.Linear.None,!0),c.fade(this.bottomLayerGrp,0,0,1e3,Phaser.Easing.Linear.None,!0),c.fade(this.belowLayerGrp,0,0,1e3,Phaser.Easing.Linear.None,!0),c.fade(this.aboveLayerGrp,0,0,1e3,Phaser.Easing.Linear.None,!0),c.fade(this.overlayLayerGrp,0,0,1e3,Phaser.Easing.Linear.None,!0))}}]),e}();i.default=P},{"../../settings":3,"../board/board":12,"../board/fall-pieces":13,"../const/boosters":14,"../utils/blast":24,"../utils/custom-bounce":25,"../utils/tweener":27,"../utils/util":28}],17:[function(e,t,i){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=e("../utils/tweener"),o=a(n),h=e("../utils/util"),l=a(h),c=e("../../settings"),d=function(e){return e&&e.__esModule?e:{default:e}}(c),u=function(){function e(t){s(this,e),this.game=t,this.customEffects=[],this.aboveGrp=this.game.add.group(),this.belowGrp=this.game.add.group(),this.sortLayers(),this.processEffects("begin"),this.game.onInteract.add(this.onInteract,this),this.game.onInteractionComplete.add(this.onInteractionComplete,this),this.game.onGameComplete.add(this.onGameComplete,this),this.game.onFinalScene.add(this.onFinalScene,this)}return r(e,[{key:"sortLayers",value:function(){this.game.world.bringToTop(this.aboveGrp),this.game.world.sendToBack(this.belowGrp)}},{key:"onInteract",value:function(){this.sortLayers(),this.processEffects("interaction"+this.game.global.interaction+"-start")}},{key:"onInteractionComplete",value:function(){this.sortLayers(),this.processEffects("interaction"+(this.game.global.interaction-1)+"-end")}},{key:"onGameComplete",value:function(){this.sortLayers(),this.processEffects("win")}},{key:"onFinalScene",value:function(){this.sortLayers(),this.processEffects("finalScene")}},{key:"processEffects",value:function(e){this.effects=this.getEffects(e);var t,i;this.customEffects.forEach(function(e,a){t=!0===Array.isArray(e.hideDelay)?e.hideDelay[a]:e.hideDelay||0,i=!0===Array.isArray(e.hideDuration)?e.hideDuration[a]:e.hideDuration||0,o.fadeOut(e.sprite,t,i,Phaser.Easing.Linear.None,!0)},this),this.effects.forEach(function(e){this.processEffect(e)},this)}},{key:"processEffect",value:function(e){var t=this.game.cache.checkImageKey(e.key),i=e.delay||0;Array.isArray(e.delay)&&(i=e.delay[e.index]),this.game.time.events.add(i,function(){!0===t?this.createAnimation(e):this.createItem(e),this.doAnimation(e)},this)}},{key:"createItem",value:function(e){var t=new Phaser.Sprite(this.game,0,0,"sprites",e.key+".png");l.spriteToDom(e.htmlId,t),t.anchor.set(void 0!==e.anchorX?e.anchorX:.5,void 0!==e.anchorY?e.anchorY:.5),e.sprite=t,!0===e.below?this.belowGrp.add(t):this.aboveGrp.add(t),this.customEffects.push(e)}},{key:"createAnimation",value:function(e){var t=new Phaser.Sprite(this.game,0,0,e.key);l.animToDom(e.htmlId,t),t.anchor.set(void 0!==e.anchorX?e.anchorX:.5,void 0!==e.anchorY?e.anchorY:.5);var i=t.animations.add("anim");t.animations.play("anim",e.fps,e.loop,!0),e.sprite=t,!0===e.below?this.belowGrp.add(t):this.aboveGrp.add(t),!0===e.randomPosition&&(t.x=l.rndInt(this.game.world.width,0),t.y=l.rndInt(this.game.world.height,0),!0===e.randomAngle&&(t.angle=l.rndInt(360,0)),!0===e.loop&&i.onLoop.add(function(t){t.x=l.rndInt(this.game.world.width,0),t.y=l.rndInt(this.game.world.height,0),!0===e.randomAngle&&(t.angle=l.rndInt(360,0))},this)),this.customEffects.push(e)}},{key:"doAnimation",value:function(e){var t,i,a,s,r,n,h,c,d,u,g;(e.animations||[]).forEach(function(f){switch("fadeIn"===f.animation&&(e.sprite.alpha=0),t=f.delay||0,i=f.duration||0,a=l.getEasing(f.easing||"Linear"),s=void 0!==f.x?l.toPerc(f.x):0,r=void 0!==f.y?l.toPerc(f.y):0,n=f.angle||0,c=f.toScale||1,d=f.endScale||1,h=f.htmlId||"",u=f.xScale||1,g=f.yScale||1,f.animation){case"moveTo":s=e.sprite.x+e.sprite.width*s,r=e.sprite.y+e.sprite.height*r,o.moveTo(e.sprite,s,r,t,i,a);break;case"fade":o.fade(e.sprite,void 0,t,i,a);break;case"fadeIn":o.fadeIn(e.sprite,t,i,a);break;case"fadeOut":o.fadeOut(e.sprite,t,i,a);break;case"scaleTo":o.scaleTo(e.sprite,s,r,t,i,a);break;case"scaleIn":o.scaleIn(e.sprite,t,i,a);break;case"moveToDom":o.moveToDom(e.sprite,h,t,i,a);break;case"bulge":o.bulge(e.sprite,t,i);break;case"spinIn":o.spinIn(e.sprite,t,i);break;case"wobbleScaleIn":o.wobbleScaleIn(e.sprite,n,c,d);break;case"jiggle":o.jiggle(e.sprite,u,g,i);break;case"jiggleAngle":o.jiggleAngle(e.sprite,n,i);break;case"scaleThenFade":o.scaleThenFade(e.sprite,t,i)}},this)}},{key:"convertPercentToTweenPixels",value:function(e,t,i){e=e||"0%";var a=.01*Number(e.replace("%","")),s=a<0?"-":"+";a=Math.abs(a);var r=i?t.height*a:t.width*a;return r=s+r}},{key:"getEffects",value:function(e){var t,i=[];for(var a in d.default.customEffects)d.default.customEffects.hasOwnProperty(a)&&d.default.customEffects[a].showOn===e&&(t=l.clone(d.default.customEffects[a]),t.key=a,!0===Array.isArray(t.htmlId)?t.htmlId.forEach(function(e,a){t=l.clone(t),t.htmlId=e,t.index=a,i.push(t)},this):i.push(t));return i}}]),e}();i.default=u},{"../../settings":3,"../utils/tweener":27,"../utils/util":28}],18:[function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=e("../utils/util"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),l=function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.graphics=e.add.graphics(0,0),i.graphics.beginFill(0,1),i.graphics.drawRect(0,0,window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio),i.add(i.graphics),i.finalAlpha=0,i.alpha=0,i.game.add.existing(i),i}return r(t,e),n(t,[{key:"show",value:function(){h.fade(this,this.finalAlpha,300)}},{key:"hide",value:function(){h.fade(this,0,300)}}]),t}(Phaser.Group);i.default=l},{"../utils/util":28}],19:[function(e,t,i){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),h=e("../../settings"),l=function(e){return e&&e.__esModule?e:{default:e}}(h),c=e("../utils/tweener"),d=a(c),u=e("../utils/util"),g=a(u),f=function(e){function t(e){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.createItem({key:"sprites",name:"goal-panel"},"goal-panel"),l.default.goal1&&(i.createItem(l.default.goal1,"goal-item-1"),i.createText(l.default.goal1,"goal-text-1")),l.default.goal2&&(i.createItem(l.default.goal2,"goal-item-2"),i.createText(l.default.goal2,"goal-text-2")),l.default.goal3&&(i.createItem(l.default.goal3,"goal-item-3"),i.createText(l.default.goal3,"goal-text-3")),i.game.add.existing(i),i.game.onGetGoalItem.add(i.onGetGoalItem,i),i.game.onGameComplete.add(i.onGameComplete,i),i}return n(t,e),o(t,[{key:"createItem",value:function(e,t){var i=e.key||"pieces",a=e.name||e.item,s=new Phaser.Sprite(this.game,0,0,i,a+".png");s.anchor.set(.5,.5),s.angle=e.angle||0,!0===g.isPortrait()&&"goal-panel"===i?s.angle=l.default.goalPanelAnglePortrait||0:s.angle=l.default.goalPanelAngleLandscape||0,"goal-panel"!==e.name&&(s.angle+=-1*this["goal-panel"].angle),g.spriteToDom(t,s),this[t]=s,this.add(s)}},{key:"createText",value:function(e,t){var i=e.collected+"/"+e.amount,a=new Phaser.Text(this.game,0,0,i,{font:"100px mainfont",fill:l.default.goalTextFill,stroke:l.default.goalTextStroke,strokeThickness:l.default.goalTextStrokeThickness,align:"center"});a.anchor.set(.5,.5),a.angle=e.angle||0,this[t]=a,this[t].origScale=this[t].scale.x,this[t].collected=e.collected,this[t].amount=e.amount,g.textToDom(t,a),this.add(a)}},{key:"onGetGoalItem",value:function(e){var t=e.replace("item","text"),i=this[t];if(++i.collected==i.amount&&null!==this.game.cache.getFrameByName("sprites","goal-completed.png")){var a=new Phaser.Sprite(this.game,0,0,"sprites","goal-completed.png");a.anchor.set(.5,.5),g.spriteToDom("complete-"+t,a),this["complete-"+t]=a,this.add(a),a.alpha=0,d.fade(a,1,0,250),d.fade(i,0,0,250);var s=a.scale.x;a.scale.x=0,a.scale.y=0,this.game.add.tween(a.scale).to({x:s,y:s},600,Phaser.Easing.Back.Out,!0,0)}var r=i.collected+"/"+i.amount;i.setText(r),i.scale.x=2*i.origScale,i.scale.y=2*i.origScale,this.game.add.tween(i.scale).to({x:i.origScale,y:i.origScale},600,Phaser.Easing.Back.Out,!0,0)}},{key:"onGameComplete",value:function(){if(!0===l.default.removeGoalPanelOnComplete){var e=0,t=0,i="up";switch(g.isPortrait(),i=l.default.goalPanelExitPortrait||"up",i){case"up":t=-1*(this["goal-panel"].y+.5*this["goal-panel"].height);break;case"down":t=this.game.world.height-this["goal-panel"].y+.5*this["goal-panel"].height;break;case"left":e=-1*(this["goal-panel"].x+.5*this["goal-panel"].width);break;case"right":e=this.game.world.width-this["goal-panel"].x+.5*this["goal-panel"].width}this.game.add.tween(this).to({x:e,y:t},l.default.goalExitDuration,Phaser.Easing.Back.In,!0,l.default.goalExitDelay)}}}]),t}(Phaser.Group);i.default=f},{"../../settings":3,"../utils/tweener":27,"../utils/util":28}],20:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),h=e("../utils/util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t
}(h),c=e("../../localization"),d=a(c),u=e("../board/board"),g=(a(u),e("../prefabs/dark-overlay")),f=a(g),m=e("../board/fall-pieces"),p=(a(m),e("../../settings")),y=a(p),w=function(e){function t(e,i){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.board=i,a.darkOverlay=new f.default(a.game),e.world.bringToTop(i.bgLayerGrp),e.world.bringToTop(i.bottomLayerGrp),e.world.bringToTop(i.belowLayerGrp),e.world.bringToTop(i.aboveLayerGrp),e.world.bringToTop(i.overlayLayerGrp),e.world.bringToTop(e.state.states.endcard.cta),a.createHighlightBox(),a.createTutorialHand(),a.createTooltip(),a.createArrow(),a.display(y.default["interaction"+a.game.global.interaction]),a}return n(t,e),o(t,[{key:"display",value:function(e){this.board.overlay.mask=this.getMask(e.highlightTiles,e.highlightOtherTiles),l.fade(this.board.overlay,1,300),this.animateTutorialHand(e),this.showArrow(e),this.darkOverlay.show(),this.board.showOverlay(),this.setTooltipText(d.default[e.tooltip.replace("{{","").replace("}}","")]),this.showTooltip()}},{key:"hide",value:function(){if(null!==this.game){this.hidden=!0;l.fade(this.board.overlay,0,300),l.fade(this.arrow,0,300),l.fade(this.hand,0,300),l.fade(this.highlightBox,0,300),l.fade(this.tooltipGrp,0,300),this.darkOverlay.hide(),this.game.time.events.add(350,function(){this.mask.clear(),this.darkOverlay.destroy(),this.arrow.destroy(),this.hand.destroy(),this.highlightBox.destroy(),this.tooltipGrp.destroy(),this.destroy()},this)}}},{key:"getMask",value:function(e,t){if(e.length<1&&e.length>2)return void console.error("invalid amount of highlighted tiles");var i,a=new Phaser.Rectangle(this.board.x+e[0].x*this.board.tileWidth,this.board.y+e[0].y*this.board.tileWidth,this.board.tileWidth,this.board.tileWidth),s=a,r=!1;if(2===e.length){i=new Phaser.Rectangle(this.board.x+e[1].x*this.board.tileWidth,this.board.y+e[1].y*this.board.tileWidth,this.board.tileWidth,this.board.tileWidth);var r=e[0].y===e[1].y;s=new Phaser.Rectangle(Math.min(a.x,i.x),Math.min(a.y,i.y),this.board.tileWidth*(r?2:1),this.board.tileWidth*(r?1:2))}var n,o,h,l,c,d,u,g,f=this.board.tileWidth*this.board.boardWidth*window.devicePixelRatio,m=this.board.tileWidth*this.board.boardHeight*window.devicePixelRatio;if(null!=t){var p=t[0].x==t[1].x?1:Math.abs(t[0].x-t[1].x)+1,y=t[0].y==t[1].y?1:Math.abs(t[0].y-t[1].y)+1,w=new Phaser.Rectangle(this.board.x+Math.min(t[0].x,t[1].x)*this.board.tileWidth,this.board.y+Math.min(t[0].y,t[1].y)*this.board.tileWidth,this.board.tileWidth*p,this.board.tileWidth*y);n=new Phaser.Rectangle(0,0,Math.min(s.x,w.x),m),o=new Phaser.Rectangle(Math.max(s.x+s.width,w.x+w.width),0,f,m),h=new Phaser.Rectangle(Math.min(s.x,w.x),0,Math.max(s.width,w.width),Math.min(s.y,w.y)),l=new Phaser.Rectangle(Math.min(s.x,w.x),Math.max(s.y+s.height,w.y+w.height),Math.max(s.width,w.width),m-Math.max(s.y+s.height,w.y+w.height)),c=new Phaser.Rectangle(n.width,h.height,Math.abs(s.x-w.x),Math.abs(s.y-w.y)),d=new Phaser.Rectangle(Math.min(s.x+s.width,w.x+w.width),h.height,Math.abs(s.x+s.width-w.x-w.width),Math.abs(s.y-w.y)),u=new Phaser.Rectangle(l.x,Math.min(s.y+s.height,w.y+w.height),Math.abs(s.x-w.x),l.y-Math.min(s.y+s.height,w.y+w.height)),g=new Phaser.Rectangle(Math.min(s.x+s.width,w.x+w.width),Math.min(s.y+s.height,w.y+w.height),o.x-Math.min(s.x+s.width,w.x+w.width),l.y-Math.min(s.y+s.height,w.y+w.height))}else n=new Phaser.Rectangle(0,0,s.x,m),o=new Phaser.Rectangle(s.x+s.width,0,f,m),h=new Phaser.Rectangle(s.x,0,s.width,s.y),l=new Phaser.Rectangle(s.x,s.y+s.height,s.width,m);var x=[n,o,h,l];null!=t&&(x=[n,o,h,l,c,d,u,g]),this.showHighlightBox(s,r),this.mask=this.game.add.graphics(0,0),this.mask.beginFill(16777215);for(var v=0;v<x.length;v++)this.mask.drawRect(x[v].x,x[v].y,x[v].width,x[v].height);return this.mask.isMask=!0,this.mask}},{key:"createHighlightBox",value:function(){var e=.08*this.board.tileWidth;this.board.tileWidth;this.highlightBox=this.game.add.sprite(0,0,"sprites","highlight-box-2.png"),this.highlightBox.scale.x=(this.board.tileWidth+2*e)/this.highlightBox._frame.width,this.highlightBox.scale.y=(this.board.tileWidth+2*e)/this.highlightBox._frame.width,this.highlightBox.alpha=0}},{key:"showHighlightBox",value:function(e,t){this.highlightBox.alpha=1;var i=.08*this.board.tileWidth,a=.04*this.board.tileWidth,s=e.x-i,r=e.y-a;this.highlightBox.angle=t?90:0,this.highlightBox.x=s+(t?2*this.board.tileWidth+1.5*i:0),this.highlightBox.y=r+(t?.75*-a:0)}},{key:"createTutorialHand",value:function(){this.hand=this.game.add.sprite(0,0,"sprites","hand.png"),this.hand.scale.x=2*this.board.tileWidth/this.hand._frame.width,this.hand.scale.y=2*this.board.tileWidth/this.hand._frame.width,this.hand.alpha=0,this.hand.anchor.set(y.default.handAnchorX||0,y.default.handAnchorY||0)}},{key:"animateTutorialHand",value:function(e){"tap"===y.default.interactionType&&this.animateTutorialHandTap(e),"swipe"===y.default.interactionType&&this.animateTutorialHandSwipe(e)}},{key:"animateTutorialHandSwipe",value:function(e){this.hand.alpha=1,this.hand.moveStart={x:this.board.x+e.highlightTiles[0].x*this.board.tileWidth+.5*this.board.tileWidth,y:this.board.y+e.highlightTiles[0].y*this.board.tileWidth+.5*this.board.tileWidth},this.hand.moveEnd={x:this.board.x+e.highlightTiles[1].x*this.board.tileWidth+.5*this.board.tileWidth,y:this.board.y+e.highlightTiles[1].y*this.board.tileWidth+.5*this.board.tileWidth},this.tweenHandSwipe(0,this.hand.moveStart.x,this.hand.moveStart.y,this.hand.moveEnd.x,this.hand.moveEnd.y)}},{key:"animateTutorialHandTap",value:function(e){this.hand.alpha=0,this.hand.x=this.board.x+e.highlightTiles[0].x*this.board.tileWidth+.5*this.board.tileWidth,this.hand.y=this.board.y+e.highlightTiles[0].y*this.board.tileWidth+.5*this.board.tileWidth,this.tweenHandTap()}},{key:"tweenHandTap",value:function(e){if(!((e=e||0)>2)&&this.hand&&this.hand.parent&&!0!==this.hidden){var t=this.hand.scale.x;this.hand.scale.x=1.5*t,this.hand.scale.y=1.5*t;var i=this.game.add.tween(this.hand).to({alpha:1},300,Phaser.Easing.Linear.None,!0),a=this.game.add.tween(this.hand).to({alpha:0},300,Phaser.Easing.Linear.None,!1,400);this.game.add.tween(this.hand.scale).to({x:t,y:t},1e3,Phaser.Easing.Linear.None,!0);i.chain(a),a.onComplete.add(function(){this.game.time.events.add(500,function(){this.tweenHandTap(e+1)},this)},this)}}},{key:"tweenHandSwipe",value:function(e,t,i,a,s){if(!((e=e||0)>2)&&this.hand&&this.hand.parent&&!0!==this.hidden){this.hand.x=t,this.hand.y=i,this.hand.alpha=0;var r=this.game.add.tween(this.hand).to({alpha:1},300,Phaser.Easing.Linear.None,!0),n=this.game.add.tween(this.hand).to({x:a,y:s},300,Phaser.Easing.Linear.None),o=this.game.add.tween(this.hand).to({alpha:0},300,Phaser.Easing.Linear.None);r.chain(n),n.chain(o),o.onComplete.add(function(){this.game.time.events.add(500,function(){this.tweenHandSwipe(e+1,t,i,a,s)},this)},this)}}},{key:"createTooltip",value:function(){this.tooltipGrp=this.game.add.group(),this.tooltip=this.createItem("sprites","tooltip","tooltip"),this.tooltipText=this.createText(),this.tooltipGrp.add(this.tooltip),this.tooltipGrp.add(this.tooltipText),this.tooltipGrp.alpha=0}},{key:"createItem",value:function(e,t,i){var a=new Phaser.Sprite(this.game,0,0,e,t+".png");return a.anchor.set(.5,.5),l.spriteToDom(i,a),a}},{key:"createText",value:function(){var e=new Phaser.Text(this.game,0,0,"",{font:"100px mainfont",fill:y.default.tooltipTextFill,stroke:y.default.tooltipTextStroke,strokeThickness:y.default.tooltipTextStrokeThickness,align:"center"});return e.anchor.set(.5,.5),e}},{key:"setTooltipText",value:function(e){this.tooltipText.setText(e),l.textToDom("tooltip-text",this.tooltipText)}},{key:"showTooltip",value:function(){l.fade(this.tooltipGrp,1,500),this.game.add.tween(this.tooltipGrp).from({y:-100},500,Phaser.Easing.Linear.None,!0)}},{key:"createArrow",value:function(){this.arrow=this.game.add.sprite(0,0,"sprites","arrow.png"),this.arrow.scale.x=2*this.board.tileWidth/this.arrow._frame.width,this.arrow.scale.y=2*this.board.tileWidth/this.arrow._frame.width,this.arrow.anchor.set(1,.5),this.arrow.alpha=0}},{key:"showArrow",value:function(e){this.arrow.x=this.board.x+e.highlightTiles[0].x*this.board.tileWidth-.1*this.board.tileWidth,this.arrow.y=this.board.y+e.highlightTiles[0].y*this.board.tileWidth+.5*this.board.tileWidth;var t="left"===e.arrow.dir||"right"===e.arrow.dir;"right"===e.arrow.dir&&(this.arrow.scale.x=-1*Math.abs(this.arrow.scale.x),this.arrow.x+=1.5*this.board.tileWidth),"up"===e.arrow.dir&&(this.arrow.angle=-90,this.arrow.x=this.board.x+e.highlightTiles[0].x*this.board.tileWidth- -.5*this.board.tileWidth,this.arrow.y=this.board.y+e.highlightTiles[0].y*this.board.tileWidth+1.3*this.board.tileWidth),"down"===e.arrow.dir&&(this.arrow.angle=90,this.arrow.x=this.board.x+e.highlightTiles[0].x*this.board.tileWidth- -.5*this.board.tileWidth,this.arrow.y=this.board.y+e.highlightTiles[0].y*this.board.tileWidth+0*this.board.tileWidth);l.fade(this.arrow,1,500),t?this.game.add.tween(this.arrow).to({x:this.arrow.x-.25*this.board.tileWidth},500,Phaser.Easing.Linear.None,!0,0,0,!0).loop():this.game.add.tween(this.arrow).to({y:this.arrow.y-.25*this.board.tileWidth},500,Phaser.Easing.Linear.None,!0,0,0,!0).loop()}}]),t}(Phaser.Group);i.default=w},{"../../localization":1,"../../settings":3,"../board/board":12,"../board/fall-pieces":13,"../prefabs/dark-overlay":18,"../utils/util":28}],21:[function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),n(t,[{key:"preload",value:function(){}},{key:"init",value:function(){var e=this.game;e.onGameComplete=new Phaser.Signal,e.onInteract=new Phaser.Signal,e.onInteractionComplete=new Phaser.Signal,e.onFinalScene=new Phaser.Signal,e.onGetGoalItem=new Phaser.Signal,window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={interaction:1,isComplete:!1,canInteract:!0}}}]),t}(Phaser.State);i.default=o},{}],22:[function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),l=e("../utils/tweener"),c=s(l),d=e("../utils/util"),u=s(d),g=e("../prefabs/board"),f=a(g),m=e("../prefabs/custom-effects"),p=a(m),y=e("../prefabs/goal"),w=a(y),x=e("../prefabs/instructions"),v=a(x),b=e("../../settings"),S=a(b),P=e("../../localization"),T=a(P),z=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),h(t,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.time.events.removeAll(),this.close=document.getElementById("vungle-close"),this.createItems(),this.setupInputListeners(),this.autoInteract(),this.game.global.canInteract=!1,this.game.global.isInteracting=!1,this.game.time.events.add(700,function(){this.game.global.canInteract=!0,this.game.global.isInteracting=!1},this),this.game.onInteract.add(this.onInteract,this),this.game.onInteractionComplete.add(this.onInteractionComplete,this),this.game.onGameComplete.add(this.onGameComplete,this)}},{key:"setupInputListeners",value:function(){"tap"===S.default.interactionType&&this.game.input.onUp.add(function(e){u.isWithinDomEl(e.position.x,e.position.y,"board-inner")&&this.interact()},this),"swipe"===S.default.interactionType&&this.game.input.onUp.add(function(e){u.isWithinDomEl(e.position.x,e.position.y,"board-inner")&&this.interact()},this)}},{key:"interact",value:function(){if(!0===this.game.global.canInteract){if(!0===this.game.global.gameComplete&&!0!==this.game.global.isInteracting)return;this.autoInteractTimer&&this.game.time.events.remove(this.autoInteractTimer),this.game.global.isInteracting=!0,this.game.time.events.add(S.default.timerDuration,function(){this.close.className=""},this),this.game.global.canInteract=!1,this.instructions.hide(),this.game.time.events.add(S.default.interactionDelay||0,function(){this.game.onInteract.dispatch(),this.game.global.interaction++},this)}}},{key:"createItems",value:function(){(S.default.goal1||S.default.goal2||S.default.goal3)&&(this.goal=new w.default(this.game)),this.cta=this.createItem("sprites","cta","cta-start"),this.cta.inputEnabled=!0,this.cta.events.onInputDown.add(function(e){doSomething("download")},this),this.board=new f.default(this.game),this.instructions=new v.default(this.game,this.board),this.logo=this.createItem("sprites","logo","logo"),this.logo.alpha=0,this.customEffects=new p.default(this.game)}},{key:"createItem",value:function(e,t,i){var a=this.game.add.sprite(0,0,e,t.replace(".png","")+".png");return a.anchor.set(.5,.5),u.spriteToDom(i,a),a}},{key:"render",value:function(){}},{key:"autoInteract",value:function(){this.canAutoInteract=!0,this.autoInteractTimer=this.game.time.events.add(S.default.autoPlayAfter,function(){!0===this.canAutoInteract&&this.interact()},this)}},{key:"onInteract",value:function(){}},{key:"onInteractionComplete",value:function(){!0!==this.game.global.gameComplete&&(S.default["interaction"+this.game.global.interaction]?(this.instructions=new v.default(this.game,this.board),this.autoInteract()):this.game.onGameComplete.dispatch(),this.game.time.events.add(700,function(){this.game.global.canInteract=!0,this.game.global.isInteracting=!1},this))}},{key:"onGameComplete",value:function(){this.game.global.gameComplete=!0,c.moveToDom(this.cta,"cta-end",S.default.ctaMoveDelay,S.default.ctaMoveDuration,Phaser.Easing.Quadratic.Out,function(e){c[S.default.ctaAnimation](e,S.default.ctaAnimationDelay,S.default.ctaAnimationDuration)}),S.default.finalScene&&this.game.time.events.add(S.default.finalScene.delay,function(){this.createFinalScene(S.default.finalScene)},this)}},{key:"createFinalScene",value:function(e){this.finalSceneBg=this.createFinalSceneBg(e),this.finalSceneCta=this.createFinalSceneCta(e),this.createFinalScenePanel(e),this.createFinalSceneTooltip(e),this.tutorialActive=!0,this.createTutorialHand(e),this.tweenTutorialHand(e),this.game.onFinalScene.dispatch()}},{key:"createText",value:function(){var e=new Phaser.Text(this.game,0,0,"",{font:"200px mainfont",fill:S.default.tooltipTextFill,stroke:S.default.tooltipTextStroke,strokeThickness:S.default.tooltipTextStrokeThickness,align:"center"});return e.anchor.set(.5,.5),e}},{key:"createFinalSceneTooltip",value:function(e){e.tooltip&&(this.tooltipGrp=this.game.add.group(),this.tooltip=this.createItem("sprites",e.tooltipSprite,e.tooltipHtmlId),this.tooltipText=this.createText(),this.tooltipText.setText(T.default[e.tooltip.replace("{{","").replace("}}","")]),u.textToDom(e.tooltipTextHtmlId,this.tooltipText),this.tooltipGrp.add(this.tooltip),this.tooltipGrp.add(this.tooltipText),this.tooltipGrp.alpha=0,c.fade(this.tooltipGrp,1,0,1e3,Phaser.Easing.Linear.None),c.moveTo(this.tooltipGrp,this.tooltipGrp.x,this.tooltipGrp.y+100,0,1e3,Phaser.Easing.Quadratic.Out),this.game.time.events.add(6e3,function(){c.fade(this.tooltipGrp,0,0,600,Phaser.Easing.Linear.None),c.moveTo(this.tooltipGrp,this.tooltipGrp.x,this.tooltipGrp.y-30,0,600,Phaser.Easing.Quadratic.Out)},this))}},{key:"createFinalSceneCta",value:function(e){var t=this.createItem("sprites",e.cta,e.ctaHtmlId);return t.alpha=0,c.fade(t,1,0,1e3,Phaser.Easing.Linear.None),this.game.time.events.add(1e3,function(){c[S.default.ctaAnimation](t,0,1e3)},this),this.cta.inputEnabled=!1,t.inputEnabled=!0,t.events.onInputDown.add(function(e){doSomething("download")},this),t}},{key:"createFinalSceneBg",value:function(e){var t=this.createItem("sprites",e.bg,e.bgHtmlId);t.x=this.game.world.centerX,t.y=this.game.world.centerY,t.alpha=0;var i;return i=!0===u.isPortrait()?this.game.world.height/t._frame.sourceSizeH:this.game.world.width/t._frame.sourceSizeW,t.scale.x=i,t.scale.y=i,c.fade(t,1,0,1e3,Phaser.Easing.Linear.None),t}},{key:"createFinalScenePanel",value:function(e){var t=this.createItem("sprites",e.panel.sprite,e.panel.htmlId);this.finalScenePanelItems=[];for(var i,a,s=0;s<e.panel.items.length;s++)a=this.createItem("sprites",e.panel.items[s].deselect,e.panel.items[s].htmlId),i=this.createItem("sprites",e.panel.items[s].select,e.panel.items[s].htmlId),i.finalSceneItem={item:e.panel.items[s].item,itemXOffset:e.panel.items[s].itemXOffset,itemYOffset:e.panel.items[s].itemYOffset,itemScale:e.panel.items[s].itemScale},i.inputEnabled=!0,i.events.onInputDown.add(this.finalSceneItemClick,this),a.inputEnabled=!0,a.events.onInputDown.add(this.finalSceneItemClick,this),i.alpha=0,a.alpha=0,c.fade(a,1,0,1e3,Phaser.Easing.Linear.None),this.finalScenePanelItems.push({selectItem:i,deselectItem:a});t.alpha=0,c.fade(t,1,0,1e3,Phaser.Easing.Linear.None)}},{key:"createFinalSceneItem",value:function(e,t,i){var a=u.toPerc(S.default.finalScene.itemPositionX),s=u.toPerc(S.default.finalScene.itemPositionY),r=S.default.finalScene.itemScale,n=this.createItem("sprites",t,S.default.finalScene.bgHtmlId);n.x=e.x+e.width*a-.5*e.width,n.y=e.y+e.height*s-.5*e.height;var r=e.scale.x*r;return n.scale.x=0,n.scale.y=0,c.scaleTo(n,r*(i||1),r*(i||1),0,800,Phaser.Easing.Elastic.Out),n}},{key:"finalSceneItemClick",value:function(e){this.tutorialActive=!1,this.finalSceneItem&&this.finalSceneItem.destroy(),this.finalSceneItem=this.createFinalSceneItem(this.finalSceneBg,e.finalSceneItem.item,e.finalSceneItem.itemScale),this.finalSceneItem.x+=this.finalSceneBg.width*(u.toPerc(e.finalSceneItem.itemXOffset)||0),this.finalSceneItem.y+=this.finalSceneBg.height*(u.toPerc(e.finalSceneItem.itemYOffset)||0),this.finalScenePanelItems.forEach(function(t){t.selectItem.alpha=0,t.deselectItem.alpha=1,t.selectItem.finalSceneItem.item===e.finalSceneItem.item&&(t.selectItem.alpha=1,t.deselectItem.alpha=1)},this)}},{key:"createTutorialHand",value:function(e){this.hand=this.createItem("sprites",e.tutorialHand,e.tutorialHandHtmlId),this.hand.x+=.5*this.hand.width,this.hand.y+=.5*this.hand.height,this.hand.alpha=0}},{key:"tweenTutorialHand",value:function(e){if(!((e=e||0)>2)&&!0===this.tutorialActive){var t=this.hand.scale.x;this.hand.scale.x=t*(S.default.finalScene.tutorialHandScale||1),this.hand.scale.y=t*(S.default.finalScene.tutorialHandScale||1);var i=this.game.add.tween(this.hand).to({alpha:1},300,Phaser.Easing.Linear.None,!0),a=this.game.add.tween(this.hand).to({alpha:0},300,Phaser.Easing.Linear.None,!1,400);this.game.add.tween(this.hand.scale).to({x:t,y:t},1e3,Phaser.Easing.Linear.None,!0);i.chain(a),a.onComplete.add(function(){this.game.time.events.add(500,function(){this.tweenTutorialHand(e+1)},this)},this)}}},{key:"removeTutorial",value:function(){!1!==this.tutorialActive&&(this.tutorialActive=!1,this.game.add.tween(this.tutorialHand).to({alpha:0},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.pulse).to({alpha:0},300,Phaser.Easing.Linear.None,!0))}},{key:"update",value:function(){this.customEffects.sortLayers()}}]),t}(Phaser.State);i.default=z},{"../../localization":1,"../../settings":3,"../prefabs/board":16,"../prefabs/custom-effects":17,"../prefabs/goal":19,"../prefabs/instructions":20,"../utils/tweener":27,"../utils/util":28}],23:[function(e,t,i){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),h=e("../atlas/index"),l=a(h),c=e("../utils/util"),d=a(c),u=e("../../settings"),g=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){s(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e}return n(t,e),o(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{key:"update",value:function(){}},{key:"loadResources",value:function(){var e={fps:30,loop:!1};this.game.global.animations={};for(var t in l.default)l.default.hasOwnProperty(t)&&(this.game.load.atlasJSONHash(t,PiecSettings.assetsDir+t+".png",null,l.default[t]),this.game.global.animations[t]=d.extend(e,g.default.animations[t]||{}))}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);i.default=f},{"../../settings":3,"../atlas/index":8,"../utils/util":28}],24:[function(e,t,i){"use strict";function a(e,t){return this.blast(e,t,1)}function s(e,t){return this.blast(e,t,2)}function r(e,t,i){for(var a=[],s=-1*i;s<=i;s++)for(var r=-1*i;r<=i;r++)a.push({x:e+s,y:t+r,dist:Phaser.Math.distance(e,t,e+s,t+r)});return a}function n(e,t,i,a){for(var s=[],r=0;r<i;r++)s.push({x:r,y:t,dist:Phaser.Math.distance(e,t,r,t)});return s}function o(e,t,i,a){for(var s=this.horizontal(e,t,i,a),r=[],n=0;n<s.length;n++)s[n].x<e&&r.push(s[n]);return r}function h(e,t,i,a){for(var s=this.horizontal(e,t,i,a),r=[],n=0;n<s.length;n++)s[n].x>e&&r.push(s[n]);return r}function l(e,t,i,a){for(var s=this.vertical(e,t,i,a),r=[],n=0;n<s.length;n++)s[n].y<t&&r.push(s[n]);return r}function c(e,t,i,a){for(var s=this.vertical(e,t,i,a),r=[],n=0;n<s.length;n++)s[n].y>t&&r.push(s[n]);return r}function d(e,t,i,a){for(var s=[],r=0;r<i;r++)s.push({x:e,y:r,dist:Phaser.Math.distance(e,t,e,r)});return s}function u(e,t,i,a){var s=[];return s=s.concat(this.horizontal(e,t,i,a)),s=s.concat(this.vertical(e,t,i,a))}Object.defineProperty(i,"__esModule",{value:!0}),i.blast1=a,i.blast2=s,i.blast=r,i.horizontal=n,i.left=o,i.right=h,i.up=l,i.down=c,i.vertical=d,i.horizontalAndVertical=u},{}],25:[function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=e("../utils/custom-ease"),n=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){function e(t){a(this,e),this.vars=t=t||{},this.SquashEase=null,t.squash&&(this.Squash=new n.default),this.Bounce=new n.default,this.update(t)}return s(e,[{key:"normalizeX",value:function(e){var t,i=e.length,a=1/e[i-2];for(t=2;t<i;t+=2)e[t]=(e[t]*a*1e3|0)/1e3;e[i-2]=1}},{key:"update",value:function(e){e=e||this.vars;var t,i,a,s,r,o,h,l=Math.min(.999,e.strength||.7),c=l,d=(e.squash||0)/100,u=d,g=1/.03,f=.2,m=1,p=.1,y=[0,0,.07,0,.1,1,.1,1],w=[0,0,0,0,.1,0,.1,0];for(r=0;r<200&&(f*=c*((c+1)/2),m*=l*l,o=p+f,a=p+.49*f,s=1-m,t=p+m/g,i=a+.8*(a-t),d&&(p+=d,t+=d,a+=d,i+=d,o+=d,h=d/u,w.push(p-d,0,p-d,h,p-d/2,h,p,h,p,0,p,0,p,-.6*h,p+(o-p)/6,0,o,0),y.push(p-d,1,p,1,p,1),d*=l*l),y.push(p,1,t,s,a,s,i,s,o,1,o,1),l*=.95,g=m/(o-i),p=o,!(s>.999));r++);if(e.endAtStart){if(a=-.1,y.unshift(a,1,a,1,-.07,0),u)for(d=2.5*u,a-=d,y.unshift(a,1,a,1,a,1),w.splice(0,6),w.unshift(a,0,a,0,a,1,a+d/2,1,a+d,1,a+d,0,a+d,0,a+d,-.6,a+d+.033,0),r=0;r<w.length;r+=2)w[r]-=a;for(r=0;r<y.length;r+=2)y[r]-=a,y[r+1]=1-y[r+1]}return d&&(this.normalizeX(w),w[2]="C"+w[2],this.Squash||(this.Squash=new n.default),this.Squash.setData("M"+w.join(","))),this.normalizeX(y),y[2]="C"+y[2],this.Bounce.setData("M"+y.join(","))}}]),e}();i.default=o},{"../utils/custom-ease":26}],26:[function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),r=function(){function e(t,i,s){a(this,e),this.numbersExp=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,this.svgPathExp=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,this.scientific=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,this.needsParsingExp=/[cLlsS]/g,this.bezierError="CustomEase only accepts Cubic Bezier data.",this.calcEnd=!0,this.setData(i,s)}return s(e,[{key:"Ease",value:function(e){var t=this.lookup[e*this.l|0]||this.lookup[this.l-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy}},{key:"setData",value:function(e,t){e=e||"0,0,1,1";var i,a,s,r,n,o,h,l,c,d,u=e.match(this.numbersExp),g=1,f=[];if(t=t||{},d=t.precision||1,this.data=e,this.lookup=[],this.points=f,this.fast=d<=1,(this.needsParsingExp.test(e)||-1!==e.indexOf("M")&&-1===e.indexOf("C"))&&(u=this.pathDataToBezier(e)),4===(i=u.length))u.unshift(0,0),u.push(1,1),i=8;else if((i-2)%6)throw this.bezierError;for(0==+u[0]&&1==+u[i-2]||this.normalize(u,t.height,t.originY),this.rawBezier=u,r=2;r<i;r+=6)a={x:+u[r-2],y:+u[r-1]},s={x:+u[r+4],y:+u[r+5]},f.push(a,s),this.bezierToPoints(a.x,a.y,+u[r],+u[r+1],+u[r+2],+u[r+3],s.x,s.y,1/(2e5*d),f,f.length-1);for(i=f.length,r=0;r<i;r++)h=f[r],l=f[r-1]||h,h.x>l.x||l.y!==h.y&&l.x===h.x||h===l?(l.cx=h.x-l.x,l.cy=h.y-l.y,l.n=h,l.nx=h.x,this.fast&&r>1&&Math.abs(l.cy/l.cx-f[r-2].cy/f[r-2].cx)>2&&(this.fast=!1),l.cx<g&&(l.cx?g=l.cx:(l.cx=.001,r===i-1&&(l.x-=.001,g=Math.min(g,.001),this.fast=!1)))):(f.splice(r--,1),i--);if(i=1/g+1|0,this.l=i,n=1/i,o=0,h=f[0],this.fast){for(r=0;r<i;r++)c=r*n,h.nx<c&&(h=f[++o]),a=h.y+(c-h.x)/h.cx*h.cy,this.lookup[r]={x:c,cx:n,y:a,cy:0,nx:9},r&&(this.lookup[r-1].cy=a-this.lookup[r-1].y);this.lookup[i-1].cy=f[f.length-1].y-a}else{for(r=0;r<i;r++)h.nx<r*n&&(h=f[++o]),this.lookup[r]=h;o<f.length-1&&(this.lookup[r-1]=f[f.length-2])}return this.calcEnd=1!==f[f.length-1].y||0!==f[0].y,this}},{key:"bezierToPoints",value:function(e,t,i,a,s,r,n,o,h,l,c){var d,u=(e+i)/2,g=(t+a)/2,f=(i+s)/2,m=(a+r)/2,p=(s+n)/2,y=(r+o)/2,w=(u+f)/2,x=(g+m)/2,v=(f+p)/2,b=(m+y)/2,S=(w+v)/2,P=(x+b)/2,T=n-e,z=o-t,k=Math.abs((i-n)*z-(a-o)*T),O=Math.abs((s-n)*z-(r-o)*T);return l||(l=[{x:e,y:t},{x:n,y:o}],c=1),l.splice(c||l.length-1,0,{x:S,y:P}),(k+O)*(k+O)>h*(T*T+z*z)&&(d=l.length,this.bezierToPoints(e,t,u,g,w,x,S,P,h,l,c),this.bezierToPoints(S,P,v,b,p,y,n,o,h,l,c+1+(l.length-d))),l}}]),e}();i.default=r},{}],27:[function(e,t,i){"use strict";function a(e,t,i,a,s,r,n,o){if(null===e||null===e.game)return null;var h=e.game.add.tween(e).to({x:t,y:i},s,r,void 0===o||o,a);return n&&h.onComplete.add(n,this),h}function s(e,t,i,a,s,r,n){if(null===e||null===e.game)return null;var o={};null!==t&&(o={alpha:t});var h=e.game.add.tween(e).to(o,0===a?1:a,s,void 0===r||r,i);return n&&h.onComplete.add(n,this),h}function r(e,t,i,a,s,r){return this.fade(e,1,t,i,a,s,r)}function n(e,t,i,a,s,r){return this.fade(e,0,t,i,a,s,r)}function o(e,t,i,a,s,r,n){if(null===e||null===e.game)return null;var o=e.game.add.tween(e.scale).to({x:t,y:i},s,r,!0,a);return n&&o.onComplete.add(n,this),o}function h(e,t,i,a,s,r){if(null===e||null===e.game)return null;var n=document.getElementById(t),o=n.getBoundingClientRect(),h=this.getScaleFromDom(t,e);this.moveTo(e,(o.left+.5*o.width)*window.devicePixelRatio,(o.top+.5*o.height)*window.devicePixelRatio,i,a,s,r),this.scaleTo(e,h,h,i,a,s)}function l(e,t){var i=document.getElementById(e),a=i.getBoundingClientRect(),s=a.width*window.devicePixelRatio/t._frame.width;return!1==t._frame.height*s<=a.height*window.devicePixelRatio&&(s=a.height*window.devicePixelRatio/t._frame.height),s}function c(e,t,i){if(null===e||null===e.game)return null;e.game.add.tween(e.scale).to({x:1.2*e.scale.x,y:1.2*e.scale.x},i,Phaser.Easing.Quadratic.InOut,!0,t,-1,!0)}function d(e,t,i){if(null===e||null===e.game)return null;var a=e.scale.x,s=e.scale.y;e.angle=0,e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:a,y:s},i,Phaser.Easing.Quadratic.InOut,!0,t),e.game.add.tween(e).to({angle:360},i,Phaser.Easing.Back.InOut,!0,t)}function u(e,t,i,a,s){if(null===e||null===e.game)return null;i=e.scale.x*i,a=e.scale.x*a;var r=e.game.add.tween(e.scale).to({x:i,y:i},500,Phaser.Easing.Quadratic.Out,!0,0),n=e.game.add.tween(e.scale).to({x:a,y:a},500,Phaser.Easing.Quadratic.In,!1,0);r.chain(n);var o=e.game.add.tween(e).to({angle:15},500,function(e){return Math.sin(2*Math.PI*e)},!0,0,1);s&&o.onComplete.add(function(){s(e)},this)}function g(e,t,i,a){var s=e.scale.x,r=e.scale.y;e.game.add.tween(e.scale).to({x:s*(t||1.1),y:r*(i||.9)},a||800,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}function f(e,t,i){t=t||10;var a=e.angle,s=a+t;e.angle-=t,e.game.add.tween(e).to({angle:s},800,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}function m(e,t,i,a){var s=e.scale.x,r=e.scale.y;e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:s,y:r},i||800,Phaser.Easing.Elastic.Out,!0,t||0)}function p(e,t,i,a){var s=.3*a;e.alpha=0;var r=e.game.add.tween(e).to({alpha:1},s,Phaser.Easing.Linear.None,!0,i||0),n=e.game.add.tween(e).to({alpha:0},s,Phaser.Easing.Linear.None,!1,a-2*s);r.chain(n),e.game.add.tween(e).to({y:"-"+t},a,Phaser.Easing.Quadratic.Out,!0,i||0)}function y(e,t,i){var a=.3*i,s=.15*i,r=e.scale.x,n=e.scale.y;e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:r,y:n},s,Phaser.Easing.Quadratic.In,!0,t||0),e.game.add.tween(e).to({alpha:0},a,Phaser.Easing.Linear.None,!0,i-s)}Object.defineProperty(i,"__esModule",{value:!0}),i.moveTo=a,i.fade=s,i.fadeIn=r,i.fadeOut=n,i.scaleTo=o,i.moveToDom=h,i.getScaleFromDom=l,i.bulge=c,i.spinIn=d,
i.wobbleScaleIn=u,i.jiggle=g,i.jiggleAngle=f,i.scaleIn=m,i.fadeFloat=p,i.scaleThenFade=y},{}],28:[function(e,t,i){"use strict";function a(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function s(e){return e[this.rndInt(e.length-1,0)]}function r(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function n(){return window.innerHeight>window.innerWidth}function o(e){return JSON.parse(JSON.stringify(e))}function h(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function l(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function c(e){e.style.opacity=0;var t=+new Date;!function i(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function d(e){return 100*Math.sqrt(2*Math.abs(e)/S)}function u(e){var t=[];e.forEach(function(e){t.push(JSON.stringify(e))},this);var i=[];t.forEach(function(e){-1===i.indexOf(e)&&i.push(e)},this);for(var a=0;a<i.length;a++)i[a]=JSON.parse(i[a]);return i}function g(e,t){var i,a={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}function f(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function m(e,t){var i=document.getElementById(e),a=i.getBoundingClientRect(),s=t._frame.width,r=t._frame.height;90!==t.angle&&-90!==t.angle||(s=t._frame.height,r=t._frame.width);var n=a.width*window.devicePixelRatio/s;t.scale.x=n,t.scale.y=n,!1==r*n<=a.height*window.devicePixelRatio&&(n=a.height*window.devicePixelRatio/r,t.scale.x=n,t.scale.y=n),t.anchor.set(.5,.5),t.x=(a.left+.5*a.width)*window.devicePixelRatio,t.y=(a.top+.5*a.height)*window.devicePixelRatio}function p(e,t){var i=document.getElementById(e),a=i.getBoundingClientRect(),s=a.width*window.devicePixelRatio/t._frame.sourceSizeW;t.scale.x=s,t.scale.y=s,!1==t._frame.sourceSizeH*s<=a.height*window.devicePixelRatio&&(s=a.height*window.devicePixelRatio/t._frame.sourceSizeH,t.scale.x=s,t.scale.y=s),t.anchor.set(.5,.5),t.x=(a.left+.5*a.width)*window.devicePixelRatio,t.y=(a.top+.5*a.height)*window.devicePixelRatio}function y(e,t){var i=document.getElementById(e),a=i.getBoundingClientRect(),s=0,r=40;for(t.x=a.left*window.devicePixelRatio+.5*t.width,t.y=a.top*window.devicePixelRatio+.5*t.height;s<1e3&&(t.width>a.width*window.devicePixelRatio||t.height>a.height*window.devicePixelRatio)&&r>0;)t.fontSize=r+"vw",r--,t.updateText(),t.x=a.left*window.devicePixelRatio+.5*t.width,t.y=a.top*window.devicePixelRatio+.5*t.height,s++}function w(e){return.01*Number(e.replace("%",""))}function x(e,t,i){if(null===e||null===e.game)return null;e.game.add.tween(e).to({alpha:t},i,Phaser.Easing.Quadratic.In,!0,0)}function v(e){switch(e){case"Linear":return Phaser.Easing.Linear.None;case"BackIn":return Phaser.Easing.Back.In;case"BackOut":return Phaser.Easing.Back.Out;case"BounceIn":return Phaser.Easing.Bounce.In;case"BounceOut":return Phaser.Easing.Bounce.Out;case"CircularIn":return Phaser.Easing.Circular.In;case"CircularOut":return Phaser.Easing.Circular.Out;case"CubicIn":return Phaser.Easing.Cubic.In;case"CubicOut":return Phaser.Easing.Cubic.Out;case"ElasticIn":return Phaser.Easing.Elastic.In;case"ElasticOut":return Phaser.Easing.Elastic.Out;case"ExponentialIn":return Phaser.Easing.Exponential.In;case"ExponentialOut":return Phaser.Easing.Exponential.Out;case"QuadraticIn":return Phaser.Easing.Quadratic.In;case"QuadraticOut":return Phaser.Easing.Quadratic.Out;case"QuarticIn":return Phaser.Easing.Quartic.In;case"QuarticOut":return Phaser.Easing.Quartic.Out;case"QuinticIn":return Phaser.Easing.Quintic.In;case"QuinticOut":return Phaser.Easing.Quintic.Out;case"SinusoidalIn":return Phaser.Easing.Sinusoidal.In;case"SinusoidalOut":return Phaser.Easing.Sinusoidal.Out}console.error('unkown easing value "'+e+'"')}function b(e,t,i){var a=document.getElementById(i),s=a.getBoundingClientRect(),r=s.left*window.devicePixelRatio,n=s.top*window.devicePixelRatio,o=(s.left+s.width)*window.devicePixelRatio,h=(s.top+s.height)*window.devicePixelRatio;return e>=r&&e<=o&&t>=n&&t<=h}Object.defineProperty(i,"__esModule",{value:!0}),i.rndInt=a,i.sample=s,i.rndRgba=r,i.isPortrait=n,i.clone=o,i.remove=h,i.removeExtension=l,i.fadeIn=c,i.calcQuadTime=d,i.uniq=u,i.extend=g,i.numberWithCommas=f,i.spriteToDom=m,i.animToDom=p,i.textToDom=y,i.toPerc=w,i.fade=x,i.getEasing=v,i.isWithinDomEl=b;var S=19.8},{}]},{},[15]);
